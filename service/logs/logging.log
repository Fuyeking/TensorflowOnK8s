2018-11-23 16:20:35,447 INFO disTf.py:31 start ...
2018-11-23 16:20:55,373 INFO disTf.py:31 start ...
2018-11-23 16:21:12,477 INFO disTf.py:31 start ...
2018-11-23 16:21:54,200 INFO disTf.py:31 start ...
2018-11-23 16:22:25,014 INFO disTf.py:31 start ...
2018-11-23 16:22:25,017 INFO disTf.py:21 service start ...
2018-11-23 16:22:31,057 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-23 16:22:31,057 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-23 16:25:08,762 INFO disTf.py:31 start ...
2018-11-23 16:28:11,139 INFO disTf.py:31 start ...
2018-11-23 16:28:22,837 INFO disTf.py:21 service start ...
2018-11-23 16:28:27,230 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-23 16:28:30,561 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-23 16:29:10,309 INFO disTf.py:31 start ...
2018-11-23 16:29:11,914 INFO disTf.py:21 service start ...
2018-11-23 16:29:16,516 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-23 16:29:21,569 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-23 16:31:50,418 INFO disTf.py:31 start ...
2018-11-23 16:31:56,620 INFO disTf.py:21 service start ...
2018-11-23 16:32:01,677 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-23 16:32:08,322 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-23 16:34:25,888 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-23 16:34:26,945 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 23, 8, 34, 25, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '2924388',
              'self_link': '/api/v1/namespaces/default/services/tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-ps-0-1',
              'uid': '959963b4-eefa-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-23 16:34:29,271 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-23 16:34:30,773 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 23, 8, 34, 28, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '2924395',
              'self_link': '/api/v1/namespaces/default/services/tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-0-2',
              'uid': '97b97120-eefa-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-23 16:34:31,911 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-23 16:34:37,351 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 23, 8, 34, 34, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '2924407',
              'self_link': '/api/v1/namespaces/default/services/tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-1-2',
              'uid': '9b036c53-eefa-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-23 16:34:43,373 INFO train_handler.py:102 ps: ['tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-ps-0-1:2222']
2018-11-23 16:34:43,374 INFO train_handler.py:104 worker: ['tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-0-2:2222', 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-1-2:2222']
2018-11-23 16:34:43,504 INFO train_handler.py:114 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 23, 8, 34, 42, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '9f976855-eefa-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-ps-0-1',
                         'tf': 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-ps-0-1'},
              'name': 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '2924423',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-ps-0-1',
              'uid': '9f976855-eefa-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '9f976855-eefa-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '9f976855-eefa-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-ps-0-1',
                                               'tf': 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-ps-0-1'},
                                    'name': 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-ps-0-1:2222',
                                                            'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-0-2:2222,tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-1-2:2222',
                                                            '/xxx/',
                                                            '/yyy',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-23 16:34:43,562 INFO train_handler.py:114 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 23, 8, 34, 42, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '9fa7f99b-eefa-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-0-2',
                         'tf': 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-0-2'},
              'name': 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '2924429',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-0-2',
              'uid': '9fa7f99b-eefa-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '9fa7f99b-eefa-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '9fa7f99b-eefa-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-0-2',
                                               'tf': 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-0-2'},
                                    'name': 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-ps-0-1:2222',
                                                            'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-0-2:2222,tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-1-2:2222',
                                                            '/xxx/',
                                                            '/yyy',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-23 16:34:43,655 INFO train_handler.py:114 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 23, 8, 34, 42, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '9fb130ed-eefa-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-1-2',
                         'tf': 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-1-2'},
              'name': 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '2924436',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-1-2',
              'uid': '9fb130ed-eefa-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '9fb130ed-eefa-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '9fb130ed-eefa-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-1-2',
                                               'tf': 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-1-2'},
                                    'name': 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-ps-0-1:2222',
                                                            'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-0-2:2222,tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-1-2:2222',
                                                            '/xxx/',
                                                            '/yyy',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-465fcf66-eefa-11e8-b0da-b46bfcc83baa-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-23 16:35:21,808 INFO disTf.py:31 start ...
2018-11-23 16:35:21,810 INFO disTf.py:21 service start ...
2018-11-23 16:35:41,870 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-23 16:35:41,870 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-23 16:35:41,887 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-23 16:35:41,912 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 23, 8, 35, 40, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '2924570',
              'self_link': '/api/v1/namespaces/default/services/tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-ps-0-1',
              'uid': 'c274cc19-eefa-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-23 16:35:41,914 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-23 16:35:41,923 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 23, 8, 35, 40, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '2924572',
              'self_link': '/api/v1/namespaces/default/services/tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-0-2',
              'uid': 'c27695b8-eefa-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-23 16:35:41,925 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-23 16:35:41,952 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 23, 8, 35, 40, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '2924574',
              'self_link': '/api/v1/namespaces/default/services/tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-1-2',
              'uid': 'c2783bec-eefa-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-23 16:35:41,990 INFO train_handler.py:102 ps: ['tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-ps-0-1:2222']
2018-11-23 16:35:41,990 INFO train_handler.py:104 worker: ['tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-0-2:2222', 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-1-2:2222']
2018-11-23 16:35:42,023 INFO train_handler.py:114 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 23, 8, 35, 40, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'c285a16e-eefa-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-ps-0-1',
                         'tf': 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-ps-0-1'},
              'name': 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '2924577',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-ps-0-1',
              'uid': 'c285a16e-eefa-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'c285a16e-eefa-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'c285a16e-eefa-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-ps-0-1',
                                               'tf': 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-ps-0-1'},
                                    'name': 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-ps-0-1:2222',
                                                            'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-0-2:2222,tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-1-2:2222',
                                                            '/xxx/',
                                                            '/yyy',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-23 16:35:42,048 INFO train_handler.py:114 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 23, 8, 35, 40, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'c287b1a6-eefa-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-0-2',
                         'tf': 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-0-2'},
              'name': 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '2924580',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-0-2',
              'uid': 'c287b1a6-eefa-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'c287b1a6-eefa-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'c287b1a6-eefa-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-0-2',
                                               'tf': 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-0-2'},
                                    'name': 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-ps-0-1:2222',
                                                            'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-0-2:2222,tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-1-2:2222',
                                                            '/xxx/',
                                                            '/yyy',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-23 16:35:42,071 INFO train_handler.py:114 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 23, 8, 35, 40, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'c28bf787-eefa-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-1-2',
                         'tf': 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-1-2'},
              'name': 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '2924586',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-1-2',
              'uid': 'c28bf787-eefa-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'c28bf787-eefa-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'c28bf787-eefa-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-1-2',
                                               'tf': 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-1-2'},
                                    'name': 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-ps-0-1:2222',
                                                            'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-0-2:2222,tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-1-2:2222',
                                                            '/xxx/',
                                                            '/yyy',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-c32f8d9a-eefa-11e8-84b0-b46bfcc83baa-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-23 16:42:49,997 INFO disTf.py:31 start ...
2018-11-23 16:42:56,154 INFO disTf.py:31 start ...
2018-11-23 16:42:56,156 INFO disTf.py:21 service start ...
2018-11-23 16:43:11,152 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-23 16:43:11,153 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-23 16:46:35,935 INFO disTf.py:31 start ...
2018-11-23 16:46:35,937 INFO disTf.py:21 service start ...
2018-11-23 16:46:41,458 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-23 16:46:41,458 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-23 16:46:41,474 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-23 16:46:41,500 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 23, 8, 46, 40, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '2925982',
              'self_link': '/api/v1/namespaces/default/services/tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-ps-0-1',
              'uid': '4b9b970a-eefc-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-23 16:46:41,502 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-23 16:46:41,508 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 23, 8, 46, 40, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '2925983',
              'self_link': '/api/v1/namespaces/default/services/tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-0-2',
              'uid': '4b9d4c9d-eefc-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-23 16:46:41,510 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-23 16:46:41,534 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 23, 8, 46, 40, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '2925984',
              'self_link': '/api/v1/namespaces/default/services/tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-1-2',
              'uid': '4b9e79fa-eefc-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-23 16:46:41,577 INFO train_handler.py:102 ps: ['tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-ps-0-1:2222']
2018-11-23 16:46:41,577 INFO train_handler.py:104 worker: ['tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-0-2:2222', 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-1-2:2222']
2018-11-23 16:46:41,653 INFO train_handler.py:114 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 23, 8, 46, 40, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '4badf2c9-eefc-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-ps-0-1',
                         'tf': 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-ps-0-1'},
              'name': 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '2925989',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-ps-0-1',
              'uid': '4badf2c9-eefc-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '4badf2c9-eefc-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '4badf2c9-eefc-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-ps-0-1',
                                               'tf': 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-ps-0-1'},
                                    'name': 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-ps-0-1:2222',
                                                            'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-0-2:2222,tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-1-2:2222',
                                                            '/xxx/',
                                                            '/yyy',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-23 16:46:41,676 INFO train_handler.py:114 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 23, 8, 46, 40, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '4bb6202e-eefc-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-0-2',
                         'tf': 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-0-2'},
              'name': 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '2925992',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-0-2',
              'uid': '4bb6202e-eefc-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '4bb6202e-eefc-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '4bb6202e-eefc-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-0-2',
                                               'tf': 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-0-2'},
                                    'name': 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-ps-0-1:2222',
                                                            'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-0-2:2222,tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-1-2:2222',
                                                            '/xxx/',
                                                            '/yyy',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-23 16:46:41,737 INFO train_handler.py:114 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 23, 8, 46, 40, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '4bb889ed-eefc-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-1-2',
                         'tf': 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-1-2'},
              'name': 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '2925999',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-1-2',
              'uid': '4bb889ed-eefc-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '4bb889ed-eefc-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '4bb889ed-eefc-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-1-2',
                                               'tf': 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-1-2'},
                                    'name': 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-ps-0-1:2222',
                                                            'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-0-2:2222,tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-1-2:2222',
                                                            '/xxx/',
                                                            '/yyy',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-4c54a08c-eefc-11e8-8427-b46bfcc83baa-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-23 16:47:02,477 INFO disTf.py:31 start ...
2018-11-23 16:47:02,480 INFO disTf.py:21 service start ...
2018-11-23 16:47:10,573 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-23 16:47:10,574 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-23 16:47:10,591 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-23 16:47:10,612 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 23, 8, 47, 9, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '2926083',
              'self_link': '/api/v1/namespaces/default/services/tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-ps-0-1',
              'uid': '5cf61e25-eefc-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-23 16:47:10,614 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-23 16:47:10,634 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 23, 8, 47, 9, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '2926084',
              'self_link': '/api/v1/namespaces/default/services/tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-0-2',
              'uid': '5cf7aaf0-eefc-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-23 16:47:10,636 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-23 16:47:10,675 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 23, 8, 47, 9, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '2926085',
              'self_link': '/api/v1/namespaces/default/services/tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-1-2',
              'uid': '5cfaf7e8-eefc-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-23 16:47:10,692 INFO train_handler.py:102 ps: ['tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-ps-0-1:2222']
2018-11-23 16:47:10,692 INFO train_handler.py:104 worker: ['tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-0-2:2222', 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-1-2:2222']
2018-11-23 16:47:10,720 INFO train_handler.py:114 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 23, 8, 47, 9, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '5d0614b7-eefc-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-ps-0-1',
                         'tf': 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-ps-0-1'},
              'name': 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '2926089',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-ps-0-1',
              'uid': '5d0614b7-eefc-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '5d0614b7-eefc-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '5d0614b7-eefc-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-ps-0-1',
                                               'tf': 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-ps-0-1'},
                                    'name': 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-ps-0-1:2222',
                                                            'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-0-2:2222,tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-1-2:2222',
                                                            '/xxx/',
                                                            '/yyy',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-23 16:47:10,761 INFO train_handler.py:114 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 23, 8, 47, 9, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '5d08173d-eefc-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-0-2',
                         'tf': 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-0-2'},
              'name': 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '2926090',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-0-2',
              'uid': '5d08173d-eefc-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '5d08173d-eefc-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '5d08173d-eefc-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-0-2',
                                               'tf': 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-0-2'},
                                    'name': 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-ps-0-1:2222',
                                                            'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-0-2:2222,tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-1-2:2222',
                                                            '/xxx/',
                                                            '/yyy',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-23 16:47:10,820 INFO train_handler.py:114 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 23, 8, 47, 9, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '5d0f4fbc-eefc-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-1-2',
                         'tf': 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-1-2'},
              'name': 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '2926094',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-1-2',
              'uid': '5d0f4fbc-eefc-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '5d0f4fbc-eefc-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '5d0f4fbc-eefc-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-1-2',
                                               'tf': 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-1-2'},
                                    'name': 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-ps-0-1:2222',
                                                            'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-0-2:2222,tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-1-2:2222',
                                                            '/xxx/',
                                                            '/yyy',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tf-1:5000/tf-dis:4.0',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-5daf64c6-eefc-11e8-8d29-b46bfcc83baa-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-23 16:57:36,543 INFO disTf.py:31 start ...
2018-11-23 16:57:36,545 INFO disTf.py:21 service start ...
2018-11-23 16:57:52,613 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-23 16:57:52,613 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-23 16:57:52,631 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-dc5efd5c-eefd-11e8-b156-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-dc5efd5c-eefd-11e8-b156-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-23 16:57:52,659 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 23, 8, 57, 51, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-dc5efd5c-eefd-11e8-b156-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '2927512',
              'self_link': '/api/v1/namespaces/default/services/tf-dc5efd5c-eefd-11e8-b156-b46bfcc83baa-ps-0-1',
              'uid': 'dba7e7c9-eefd-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-dc5efd5c-eefd-11e8-b156-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-23 16:57:52,661 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-dc5efd5c-eefd-11e8-b156-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-dc5efd5c-eefd-11e8-b156-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-23 16:57:52,669 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 23, 8, 57, 51, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-dc5efd5c-eefd-11e8-b156-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '2927513',
              'self_link': '/api/v1/namespaces/default/services/tf-dc5efd5c-eefd-11e8-b156-b46bfcc83baa-worker-0-2',
              'uid': 'dba99a0f-eefd-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-dc5efd5c-eefd-11e8-b156-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-23 16:57:52,671 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-dc5efd5c-eefd-11e8-b156-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-dc5efd5c-eefd-11e8-b156-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-23 16:57:52,688 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 23, 8, 57, 51, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-dc5efd5c-eefd-11e8-b156-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '2927514',
              'self_link': '/api/v1/namespaces/default/services/tf-dc5efd5c-eefd-11e8-b156-b46bfcc83baa-worker-1-2',
              'uid': 'dbabc58d-eefd-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-dc5efd5c-eefd-11e8-b156-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-23 16:57:52,736 INFO train_handler.py:102 ps: ['tf-dc5efd5c-eefd-11e8-b156-b46bfcc83baa-ps-0-1:2222']
2018-11-23 16:57:52,736 INFO train_handler.py:104 worker: ['tf-dc5efd5c-eefd-11e8-b156-b46bfcc83baa-worker-0-2:2222', 'tf-dc5efd5c-eefd-11e8-b156-b46bfcc83baa-worker-1-2:2222']
2018-11-23 16:58:03,774 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-23 16:58:03,775 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-23 16:58:03,786 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-e305e4c6-eefd-11e8-a277-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-e305e4c6-eefd-11e8-a277-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-23 16:58:03,821 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 23, 8, 58, 2, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-e305e4c6-eefd-11e8-a277-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '2927541',
              'self_link': '/api/v1/namespaces/default/services/tf-e305e4c6-eefd-11e8-a277-b46bfcc83baa-ps-0-1',
              'uid': 'e24fb14b-eefd-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-e305e4c6-eefd-11e8-a277-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-23 16:58:03,823 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-e305e4c6-eefd-11e8-a277-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-e305e4c6-eefd-11e8-a277-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-23 16:58:03,829 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 23, 8, 58, 2, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-e305e4c6-eefd-11e8-a277-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '2927542',
              'self_link': '/api/v1/namespaces/default/services/tf-e305e4c6-eefd-11e8-a277-b46bfcc83baa-worker-0-2',
              'uid': 'e250cbe4-eefd-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-e305e4c6-eefd-11e8-a277-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-23 16:58:03,830 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-e305e4c6-eefd-11e8-a277-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-e305e4c6-eefd-11e8-a277-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-23 16:58:03,838 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 23, 8, 58, 2, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-e305e4c6-eefd-11e8-a277-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '2927543',
              'self_link': '/api/v1/namespaces/default/services/tf-e305e4c6-eefd-11e8-a277-b46bfcc83baa-worker-1-2',
              'uid': 'e251e2ba-eefd-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-e305e4c6-eefd-11e8-a277-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-23 16:58:03,899 INFO train_handler.py:102 ps: ['tf-e305e4c6-eefd-11e8-a277-b46bfcc83baa-ps-0-1:2222']
2018-11-23 16:58:03,900 INFO train_handler.py:104 worker: ['tf-e305e4c6-eefd-11e8-a277-b46bfcc83baa-worker-0-2:2222', 'tf-e305e4c6-eefd-11e8-a277-b46bfcc83baa-worker-1-2:2222']
2018-11-23 17:00:46,885 INFO disTf.py:31 start ...
2018-11-23 17:00:51,454 INFO disTf.py:21 service start ...
2018-11-23 17:00:57,249 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-23 17:01:04,546 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-23 17:01:27,925 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-4f6cd626-eefe-11e8-aa67-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-4f6cd626-eefe-11e8-aa67-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-23 17:01:27,966 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 23, 9, 1, 26, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-4f6cd626-eefe-11e8-aa67-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '2927943',
              'self_link': '/api/v1/namespaces/default/services/tf-4f6cd626-eefe-11e8-aa67-b46bfcc83baa-ps-0-1',
              'uid': '5bfccfde-eefe-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-4f6cd626-eefe-11e8-aa67-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-23 17:01:27,973 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-4f6cd626-eefe-11e8-aa67-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-4f6cd626-eefe-11e8-aa67-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-23 17:01:27,982 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 23, 9, 1, 26, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-4f6cd626-eefe-11e8-aa67-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '2927945',
              'self_link': '/api/v1/namespaces/default/services/tf-4f6cd626-eefe-11e8-aa67-b46bfcc83baa-worker-0-2',
              'uid': '5c001e33-eefe-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-4f6cd626-eefe-11e8-aa67-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-23 17:01:27,990 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-4f6cd626-eefe-11e8-aa67-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-4f6cd626-eefe-11e8-aa67-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-23 17:01:28,001 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 23, 9, 1, 26, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-4f6cd626-eefe-11e8-aa67-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '2927947',
              'self_link': '/api/v1/namespaces/default/services/tf-4f6cd626-eefe-11e8-aa67-b46bfcc83baa-worker-1-2',
              'uid': '5c02dae8-eefe-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-4f6cd626-eefe-11e8-aa67-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-23 17:01:43,978 INFO train_handler.py:102 ps: ['tf-4f6cd626-eefe-11e8-aa67-b46bfcc83baa-ps-0-1:2222']
2018-11-23 17:01:47,930 INFO train_handler.py:104 worker: ['tf-4f6cd626-eefe-11e8-aa67-b46bfcc83baa-worker-0-2:2222', 'tf-4f6cd626-eefe-11e8-aa67-b46bfcc83baa-worker-1-2:2222']
2018-11-23 21:07:15,624 INFO disTf.py:31 start ...
2018-11-23 21:07:15,627 INFO disTf.py:21 service start ...
2018-11-23 21:07:44,400 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-23 21:07:44,400 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-23 21:07:44,418 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-c42bf830-ef20-11e8-bbb8-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-c42bf830-ef20-11e8-bbb8-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-23 21:08:56,408 INFO disTf.py:31 start ...
2018-11-23 21:08:56,411 INFO disTf.py:21 service start ...
2018-11-23 21:08:59,805 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-23 21:08:59,805 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-23 21:08:59,822 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-f11dc1b6-ef20-11e8-bfbf-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-f11dc1b6-ef20-11e8-bfbf-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-23 21:10:17,804 INFO disTf.py:31 start ...
2018-11-23 21:10:17,806 INFO disTf.py:21 service start ...
2018-11-23 21:10:21,765 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-23 21:10:21,765 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-23 21:10:21,783 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-21f7fb26-ef21-11e8-a353-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-21f7fb26-ef21-11e8-a353-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-23 21:21:29,320 INFO disTf.py:31 start ...
2018-11-23 21:21:29,324 INFO disTf.py:21 service start ...
2018-11-23 21:21:30,844 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-23 21:21:35,523 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-23 21:24:04,060 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-b6a2152e-ef22-11e8-9bb8-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-b6a2152e-ef22-11e8-9bb8-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-23 21:37:49,696 INFO disTf.py:31 start ...
2018-11-23 21:37:49,699 INFO disTf.py:21 service start ...
2018-11-23 21:37:54,891 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-23 21:37:57,769 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-23 21:38:13,207 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-00082424-ef25-11e8-94d6-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-00082424-ef25-11e8-94d6-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-24 09:14:29,799 INFO disTf.py:31 start ...
2018-11-24 09:14:29,803 INFO disTf.py:21 service start ...
2018-11-24 09:14:47,095 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-24 09:14:47,096 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-24 09:14:47,118 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-55531800-ef86-11e8-b7a0-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-55531800-ef86-11e8-b7a0-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-24 09:14:47,185 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 24, 1, 14, 45, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-55531800-ef86-11e8-b7a0-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3042355',
              'self_link': '/api/v1/namespaces/default/services/tf-55531800-ef86-11e8-b7a0-b46bfcc83baa-ps-0-1',
              'uid': '541a8a0e-ef86-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-55531800-ef86-11e8-b7a0-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-24 09:14:47,189 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-55531800-ef86-11e8-b7a0-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-55531800-ef86-11e8-b7a0-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-24 09:14:47,202 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 24, 1, 14, 45, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-55531800-ef86-11e8-b7a0-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3042357',
              'self_link': '/api/v1/namespaces/default/services/tf-55531800-ef86-11e8-b7a0-b46bfcc83baa-worker-0-2',
              'uid': '541ddb1f-ef86-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-55531800-ef86-11e8-b7a0-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-24 09:14:47,207 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-55531800-ef86-11e8-b7a0-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-55531800-ef86-11e8-b7a0-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-24 09:14:47,220 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 24, 1, 14, 45, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-55531800-ef86-11e8-b7a0-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3042359',
              'self_link': '/api/v1/namespaces/default/services/tf-55531800-ef86-11e8-b7a0-b46bfcc83baa-worker-1-2',
              'uid': '54208fe0-ef86-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-55531800-ef86-11e8-b7a0-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-24 09:14:47,320 INFO train_handler.py:102 ps: ['tf-55531800-ef86-11e8-b7a0-b46bfcc83baa-ps-0-1:2222']
2018-11-24 09:14:47,320 INFO train_handler.py:104 worker: ['tf-55531800-ef86-11e8-b7a0-b46bfcc83baa-worker-0-2:2222', 'tf-55531800-ef86-11e8-b7a0-b46bfcc83baa-worker-1-2:2222']
2018-11-24 09:19:12,468 INFO disTf.py:31 start ...
2018-11-24 09:19:12,470 INFO disTf.py:21 service start ...
2018-11-24 09:19:22,360 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-24 09:19:22,361 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-24 09:19:22,377 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-f96534e2-ef86-11e8-8f2e-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-f96534e2-ef86-11e8-8f2e-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-24 09:19:22,404 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 24, 1, 19, 20, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-f96534e2-ef86-11e8-8f2e-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3042933',
              'self_link': '/api/v1/namespaces/default/services/tf-f96534e2-ef86-11e8-8f2e-b46bfcc83baa-ps-0-1',
              'uid': 'f826daed-ef86-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-f96534e2-ef86-11e8-8f2e-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-24 09:19:22,406 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-f96534e2-ef86-11e8-8f2e-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-f96534e2-ef86-11e8-8f2e-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-24 09:19:22,413 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 24, 1, 19, 20, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-f96534e2-ef86-11e8-8f2e-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3042934',
              'self_link': '/api/v1/namespaces/default/services/tf-f96534e2-ef86-11e8-8f2e-b46bfcc83baa-worker-0-2',
              'uid': 'f828a825-ef86-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-f96534e2-ef86-11e8-8f2e-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-24 09:19:22,415 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-f96534e2-ef86-11e8-8f2e-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-f96534e2-ef86-11e8-8f2e-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-24 09:19:22,458 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 24, 1, 19, 20, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-f96534e2-ef86-11e8-8f2e-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3042935',
              'self_link': '/api/v1/namespaces/default/services/tf-f96534e2-ef86-11e8-8f2e-b46bfcc83baa-worker-1-2',
              'uid': 'f829dfd2-ef86-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-f96534e2-ef86-11e8-8f2e-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-24 09:19:22,490 INFO train_handler.py:102 ps: ['tf-f96534e2-ef86-11e8-8f2e-b46bfcc83baa-ps-0-1:2222']
2018-11-24 09:19:22,490 INFO train_handler.py:104 worker: ['tf-f96534e2-ef86-11e8-8f2e-b46bfcc83baa-worker-0-2:2222', 'tf-f96534e2-ef86-11e8-8f2e-b46bfcc83baa-worker-1-2:2222']
2018-11-24 09:27:30,071 INFO disTf.py:31 start ...
2018-11-24 09:27:37,540 INFO disTf.py:31 start ...
2018-11-24 09:27:45,014 INFO disTf.py:31 start ...
2018-11-24 09:27:45,034 INFO disTf.py:21 service start ...
2018-11-24 09:27:48,469 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-24 09:27:48,471 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-24 09:27:48,521 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-270f61be-ef88-11e8-b457-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-270f61be-ef88-11e8-b457-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-24 09:27:48,554 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 24, 1, 27, 46, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-270f61be-ef88-11e8-b457-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3043931',
              'self_link': '/api/v1/namespaces/default/services/tf-270f61be-ef88-11e8-b457-b46bfcc83baa-ps-0-1',
              'uid': '25c956e3-ef88-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-270f61be-ef88-11e8-b457-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-24 09:27:48,557 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-270f61be-ef88-11e8-b457-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-270f61be-ef88-11e8-b457-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-24 09:27:48,566 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 24, 1, 27, 46, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-270f61be-ef88-11e8-b457-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3043933',
              'self_link': '/api/v1/namespaces/default/services/tf-270f61be-ef88-11e8-b457-b46bfcc83baa-worker-0-2',
              'uid': '25cb41be-ef88-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-270f61be-ef88-11e8-b457-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-24 09:27:48,569 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-270f61be-ef88-11e8-b457-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-270f61be-ef88-11e8-b457-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-24 09:27:48,618 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 24, 1, 27, 46, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-270f61be-ef88-11e8-b457-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3043935',
              'self_link': '/api/v1/namespaces/default/services/tf-270f61be-ef88-11e8-b457-b46bfcc83baa-worker-1-2',
              'uid': '25cd0ae2-ef88-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-270f61be-ef88-11e8-b457-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-24 09:27:48,627 INFO train_handler.py:102 ps: ['tf-270f61be-ef88-11e8-b457-b46bfcc83baa-ps-0-1:2222']
2018-11-24 09:27:48,627 INFO train_handler.py:104 worker: ['tf-270f61be-ef88-11e8-b457-b46bfcc83baa-worker-0-2:2222', 'tf-270f61be-ef88-11e8-b457-b46bfcc83baa-worker-1-2:2222']
2018-11-24 09:41:30,200 INFO disTf.py:31 start ...
2018-11-24 09:41:30,204 INFO disTf.py:21 service start ...
2018-11-24 09:41:51,629 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-24 09:41:51,629 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-24 09:41:51,658 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-1d9f1564-ef8a-11e8-ab37-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-1d9f1564-ef8a-11e8-ab37-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-24 09:41:51,721 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 24, 1, 41, 49, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-1d9f1564-ef8a-11e8-ab37-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3045582',
              'self_link': '/api/v1/namespaces/default/services/tf-1d9f1564-ef8a-11e8-ab37-b46bfcc83baa-ps-0-1',
              'uid': '1c5a8f0c-ef8a-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-1d9f1564-ef8a-11e8-ab37-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-24 09:41:51,726 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-1d9f1564-ef8a-11e8-ab37-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-1d9f1564-ef8a-11e8-ab37-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-24 09:41:51,763 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 24, 1, 41, 49, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-1d9f1564-ef8a-11e8-ab37-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3045583',
              'self_link': '/api/v1/namespaces/default/services/tf-1d9f1564-ef8a-11e8-ab37-b46bfcc83baa-worker-0-2',
              'uid': '1c5d4648-ef8a-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-1d9f1564-ef8a-11e8-ab37-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-24 09:41:51,770 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-1d9f1564-ef8a-11e8-ab37-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-1d9f1564-ef8a-11e8-ab37-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-24 09:41:51,786 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 24, 1, 41, 49, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-1d9f1564-ef8a-11e8-ab37-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3045586',
              'self_link': '/api/v1/namespaces/default/services/tf-1d9f1564-ef8a-11e8-ab37-b46bfcc83baa-worker-1-2',
              'uid': '1c640e54-ef8a-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-1d9f1564-ef8a-11e8-ab37-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-24 09:41:51,865 INFO train_handler.py:102 ps: ['tf-1d9f1564-ef8a-11e8-ab37-b46bfcc83baa-ps-0-1:2222']
2018-11-24 09:41:51,865 INFO train_handler.py:104 worker: ['tf-1d9f1564-ef8a-11e8-ab37-b46bfcc83baa-worker-0-2:2222', 'tf-1d9f1564-ef8a-11e8-ab37-b46bfcc83baa-worker-1-2:2222']
2018-11-24 10:22:19,468 INFO disTf.py:31 start ...
2018-11-24 10:22:27,529 INFO disTf.py:31 start ...
2018-11-24 10:22:27,533 INFO disTf.py:21 service start ...
2018-11-24 10:22:31,478 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-24 10:22:31,479 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-24 10:22:31,499 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-cbe2a806-ef8f-11e8-bcde-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-cbe2a806-ef8f-11e8-bcde-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-24 10:22:34,805 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 24, 2, 22, 32, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-cbe2a806-ef8f-11e8-bcde-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3053999',
              'self_link': '/api/v1/namespaces/default/services/tf-cbe2a806-ef8f-11e8-bcde-b46bfcc83baa-ps-0-1',
              'uid': 'cc8f9266-ef8f-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-cbe2a806-ef8f-11e8-bcde-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-24 10:22:34,814 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-cbe2a806-ef8f-11e8-bcde-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-cbe2a806-ef8f-11e8-bcde-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-24 10:22:34,889 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 24, 2, 22, 32, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-cbe2a806-ef8f-11e8-bcde-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3054001',
              'self_link': '/api/v1/namespaces/default/services/tf-cbe2a806-ef8f-11e8-bcde-b46bfcc83baa-worker-0-2',
              'uid': 'cc9d3db5-ef8f-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-cbe2a806-ef8f-11e8-bcde-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-24 10:22:34,895 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-cbe2a806-ef8f-11e8-bcde-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-cbe2a806-ef8f-11e8-bcde-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-24 10:22:34,929 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 24, 2, 22, 32, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-cbe2a806-ef8f-11e8-bcde-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3054003',
              'self_link': '/api/v1/namespaces/default/services/tf-cbe2a806-ef8f-11e8-bcde-b46bfcc83baa-worker-1-2',
              'uid': 'cca3acd6-ef8f-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-cbe2a806-ef8f-11e8-bcde-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-24 10:22:35,029 INFO train_handler.py:102 ps: ['tf-cbe2a806-ef8f-11e8-bcde-b46bfcc83baa-ps-0-1:2222']
2018-11-24 10:22:35,029 INFO train_handler.py:104 worker: ['tf-cbe2a806-ef8f-11e8-bcde-b46bfcc83baa-worker-0-2:2222', 'tf-cbe2a806-ef8f-11e8-bcde-b46bfcc83baa-worker-1-2:2222']
2018-11-24 10:45:52,789 INFO disTf.py:31 start ...
2018-11-24 10:46:00,245 INFO disTf.py:31 start ...
2018-11-24 10:46:00,247 INFO disTf.py:21 service start ...
2018-11-24 10:46:21,643 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-24 10:46:21,644 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-24 10:46:21,661 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-20549ce2-ef93-11e8-8670-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-20549ce2-ef93-11e8-8670-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-24 10:46:21,850 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 24, 2, 46, 19, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-20549ce2-ef93-11e8-8670-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3057331',
              'self_link': '/api/v1/namespaces/default/services/tf-20549ce2-ef93-11e8-8670-b46bfcc83baa-ps-0-1',
              'uid': '1f220ee6-ef93-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-20549ce2-ef93-11e8-8670-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-24 10:46:21,852 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-20549ce2-ef93-11e8-8670-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-20549ce2-ef93-11e8-8670-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-24 10:46:21,873 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 24, 2, 46, 19, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-20549ce2-ef93-11e8-8670-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3057333',
              'self_link': '/api/v1/namespaces/default/services/tf-20549ce2-ef93-11e8-8670-b46bfcc83baa-worker-0-2',
              'uid': '1f2641bb-ef93-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-20549ce2-ef93-11e8-8670-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-24 10:46:21,875 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-20549ce2-ef93-11e8-8670-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-20549ce2-ef93-11e8-8670-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-24 10:46:21,983 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 24, 2, 46, 19, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-20549ce2-ef93-11e8-8670-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3057336',
              'self_link': '/api/v1/namespaces/default/services/tf-20549ce2-ef93-11e8-8670-b46bfcc83baa-worker-1-2',
              'uid': '1f2cc514-ef93-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-20549ce2-ef93-11e8-8670-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-24 10:46:22,066 INFO train_handler.py:102 ps: ['tf-20549ce2-ef93-11e8-8670-b46bfcc83baa-ps-0-1:2222']
2018-11-24 10:46:22,066 INFO train_handler.py:104 worker: ['tf-20549ce2-ef93-11e8-8670-b46bfcc83baa-worker-0-2:2222', 'tf-20549ce2-ef93-11e8-8670-b46bfcc83baa-worker-1-2:2222']
2018-11-24 10:47:33,247 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-24 10:47:33,247 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-24 10:47:33,257 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-4b024af8-ef93-11e8-8743-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-4b024af8-ef93-11e8-8743-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-24 10:47:33,290 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 24, 2, 47, 31, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-4b024af8-ef93-11e8-8743-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3057484',
              'self_link': '/api/v1/namespaces/default/services/tf-4b024af8-ef93-11e8-8743-b46bfcc83baa-ps-0-1',
              'uid': '49b7ab98-ef93-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-4b024af8-ef93-11e8-8743-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-24 10:47:33,292 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-4b024af8-ef93-11e8-8743-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-4b024af8-ef93-11e8-8743-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-24 10:47:33,301 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 24, 2, 47, 31, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-4b024af8-ef93-11e8-8743-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3057485',
              'self_link': '/api/v1/namespaces/default/services/tf-4b024af8-ef93-11e8-8743-b46bfcc83baa-worker-0-2',
              'uid': '49b95356-ef93-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-4b024af8-ef93-11e8-8743-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-24 10:47:33,303 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-4b024af8-ef93-11e8-8743-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-4b024af8-ef93-11e8-8743-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-24 10:47:33,315 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 24, 2, 47, 31, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-4b024af8-ef93-11e8-8743-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3057488',
              'self_link': '/api/v1/namespaces/default/services/tf-4b024af8-ef93-11e8-8743-b46bfcc83baa-worker-1-2',
              'uid': '49bb5b41-ef93-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-4b024af8-ef93-11e8-8743-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-24 10:47:33,358 INFO train_handler.py:102 ps: ['tf-4b024af8-ef93-11e8-8743-b46bfcc83baa-ps-0-1:2222']
2018-11-24 10:47:33,358 INFO train_handler.py:104 worker: ['tf-4b024af8-ef93-11e8-8743-b46bfcc83baa-worker-0-2:2222', 'tf-4b024af8-ef93-11e8-8743-b46bfcc83baa-worker-1-2:2222']
2018-11-24 11:39:17,629 INFO disTf.py:31 start ...
2018-11-24 11:39:17,631 INFO disTf.py:21 service start ...
2018-11-24 11:40:11,051 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-24 11:40:11,051 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-24 11:40:11,068 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a534f136-ef9a-11e8-bf81-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a534f136-ef9a-11e8-bf81-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-24 11:40:11,129 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 24, 3, 40, 8, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a534f136-ef9a-11e8-bf81-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3063964',
              'self_link': '/api/v1/namespaces/default/services/tf-a534f136-ef9a-11e8-bf81-b46bfcc83baa-ps-0-1',
              'uid': 'a3f5a2e6-ef9a-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a534f136-ef9a-11e8-bf81-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-24 11:40:11,133 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a534f136-ef9a-11e8-bf81-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a534f136-ef9a-11e8-bf81-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-24 11:40:11,142 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 24, 3, 40, 8, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a534f136-ef9a-11e8-bf81-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3063966',
              'self_link': '/api/v1/namespaces/default/services/tf-a534f136-ef9a-11e8-bf81-b46bfcc83baa-worker-0-2',
              'uid': 'a3f818b4-ef9a-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a534f136-ef9a-11e8-bf81-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-24 11:40:11,145 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a534f136-ef9a-11e8-bf81-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a534f136-ef9a-11e8-bf81-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-24 11:40:11,161 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 24, 3, 40, 8, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a534f136-ef9a-11e8-bf81-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3063968',
              'self_link': '/api/v1/namespaces/default/services/tf-a534f136-ef9a-11e8-bf81-b46bfcc83baa-worker-1-2',
              'uid': 'a3f99cd6-ef9a-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a534f136-ef9a-11e8-bf81-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-24 11:40:11,171 INFO train_handler.py:102 ps: ['tf-a534f136-ef9a-11e8-bf81-b46bfcc83baa-ps-0-1:2222']
2018-11-24 11:40:11,171 INFO train_handler.py:104 worker: ['tf-a534f136-ef9a-11e8-bf81-b46bfcc83baa-worker-0-2:2222', 'tf-a534f136-ef9a-11e8-bf81-b46bfcc83baa-worker-1-2:2222']
2018-11-26 18:32:34,893 INFO disTf.py:31 start ...
2018-11-26 18:32:34,896 INFO disTf.py:21 service start ...
2018-11-26 18:32:52,942 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-26 18:32:52,942 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-26 18:32:52,961 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a1453024-f166-11e8-92cc-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a1453024-f166-11e8-92cc-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-26 18:32:53,007 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 26, 10, 32, 52, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a1453024-f166-11e8-92cc-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3403061',
              'self_link': '/api/v1/namespaces/default/services/tf-a1453024-f166-11e8-92cc-b46bfcc83baa-ps-0-1',
              'uid': 'a1208447-f166-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a1453024-f166-11e8-92cc-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-26 18:32:53,011 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a1453024-f166-11e8-92cc-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a1453024-f166-11e8-92cc-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-26 18:32:53,020 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 26, 10, 32, 52, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a1453024-f166-11e8-92cc-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3403063',
              'self_link': '/api/v1/namespaces/default/services/tf-a1453024-f166-11e8-92cc-b46bfcc83baa-worker-0-2',
              'uid': 'a12332c0-f166-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a1453024-f166-11e8-92cc-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-26 18:32:53,024 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a1453024-f166-11e8-92cc-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a1453024-f166-11e8-92cc-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-26 18:32:53,034 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 26, 10, 32, 52, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a1453024-f166-11e8-92cc-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3403065',
              'self_link': '/api/v1/namespaces/default/services/tf-a1453024-f166-11e8-92cc-b46bfcc83baa-worker-1-2',
              'uid': 'a12531c9-f166-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a1453024-f166-11e8-92cc-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-26 18:32:53,064 INFO train_handler.py:102 ps: ['tf-a1453024-f166-11e8-92cc-b46bfcc83baa-ps-0-1:2222']
2018-11-26 18:32:53,064 INFO train_handler.py:104 worker: ['tf-a1453024-f166-11e8-92cc-b46bfcc83baa-worker-0-2:2222', 'tf-a1453024-f166-11e8-92cc-b46bfcc83baa-worker-1-2:2222']
2018-11-26 18:40:28,522 INFO disTf.py:31 start ...
2018-11-26 18:40:39,247 INFO disTf.py:31 start ...
2018-11-26 18:40:39,250 INFO disTf.py:21 service start ...
2018-11-26 18:40:45,918 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-26 18:40:51,326 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-26 18:40:54,827 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-bf21e970-f167-11e8-b4d9-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-bf21e970-f167-11e8-b4d9-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-26 18:40:54,873 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 26, 10, 40, 54, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-bf21e970-f167-11e8-b4d9-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3404073',
              'self_link': '/api/v1/namespaces/default/services/tf-bf21e970-f167-11e8-b4d9-b46bfcc83baa-ps-0-1',
              'uid': 'c0576ccb-f167-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-bf21e970-f167-11e8-b4d9-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-26 18:40:54,880 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-bf21e970-f167-11e8-b4d9-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-bf21e970-f167-11e8-b4d9-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-26 18:40:54,898 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 26, 10, 40, 54, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-bf21e970-f167-11e8-b4d9-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3404074',
              'self_link': '/api/v1/namespaces/default/services/tf-bf21e970-f167-11e8-b4d9-b46bfcc83baa-worker-0-2',
              'uid': 'c05bbd8a-f167-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-bf21e970-f167-11e8-b4d9-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-26 18:40:54,904 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-bf21e970-f167-11e8-b4d9-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-bf21e970-f167-11e8-b4d9-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-26 18:40:54,923 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 26, 10, 40, 54, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-bf21e970-f167-11e8-b4d9-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3404077',
              'self_link': '/api/v1/namespaces/default/services/tf-bf21e970-f167-11e8-b4d9-b46bfcc83baa-worker-1-2',
              'uid': 'c05fa08f-f167-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-bf21e970-f167-11e8-b4d9-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-26 18:42:07,231 INFO train_handler.py:102 ps: ['tf-bf21e970-f167-11e8-b4d9-b46bfcc83baa-ps-0-1:2222']
2018-11-26 18:42:18,103 INFO train_handler.py:104 worker: ['tf-bf21e970-f167-11e8-b4d9-b46bfcc83baa-worker-0-2:2222', 'tf-bf21e970-f167-11e8-b4d9-b46bfcc83baa-worker-1-2:2222']
2018-11-26 18:44:24,958 INFO disTf.py:31 start ...
2018-11-26 18:44:24,963 INFO disTf.py:21 service start ...
2018-11-26 18:44:27,881 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-26 18:44:32,234 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-26 18:44:34,320 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-42a08506-f168-11e8-88cb-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-42a08506-f168-11e8-88cb-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-26 18:44:34,358 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 26, 10, 44, 34, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-42a08506-f168-11e8-88cb-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3404449',
              'self_link': '/api/v1/namespaces/default/services/tf-42a08506-f168-11e8-88cb-b46bfcc83baa-ps-0-1',
              'uid': '432b6953-f168-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-42a08506-f168-11e8-88cb-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-26 18:44:34,363 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-42a08506-f168-11e8-88cb-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-42a08506-f168-11e8-88cb-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-26 18:44:34,376 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 26, 10, 44, 34, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-42a08506-f168-11e8-88cb-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3404451',
              'self_link': '/api/v1/namespaces/default/services/tf-42a08506-f168-11e8-88cb-b46bfcc83baa-worker-0-2',
              'uid': '432ea4ec-f168-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-42a08506-f168-11e8-88cb-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-26 18:44:34,382 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-42a08506-f168-11e8-88cb-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-42a08506-f168-11e8-88cb-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-26 18:44:34,392 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 26, 10, 44, 34, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-42a08506-f168-11e8-88cb-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3404453',
              'self_link': '/api/v1/namespaces/default/services/tf-42a08506-f168-11e8-88cb-b46bfcc83baa-worker-1-2',
              'uid': '43316a05-f168-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-42a08506-f168-11e8-88cb-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-26 18:44:42,999 INFO train_handler.py:102 ps: ['tf-42a08506-f168-11e8-88cb-b46bfcc83baa-ps-0-1:2222']
2018-11-26 18:44:43,000 INFO train_handler.py:104 worker: ['tf-42a08506-f168-11e8-88cb-b46bfcc83baa-worker-0-2:2222', 'tf-42a08506-f168-11e8-88cb-b46bfcc83baa-worker-1-2:2222']
2018-11-27 17:44:22,941 INFO disTf.py:31 start ...
2018-11-27 17:44:22,946 INFO disTf.py:21 service start ...
2018-11-27 17:44:39,334 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-27 17:45:30,780 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-27 17:46:19,048 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-2e6da6f4-f229-11e8-8dbf-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-2e6da6f4-f229-11e8-8dbf-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-27 17:46:19,120 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 27, 9, 46, 18, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-2e6da6f4-f229-11e8-8dbf-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3781071',
              'self_link': '/api/v1/namespaces/default/services/tf-2e6da6f4-f229-11e8-8dbf-b46bfcc83baa-ps-0-1',
              'uid': '4a4d8ee2-f229-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-2e6da6f4-f229-11e8-8dbf-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-27 17:46:19,128 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-2e6da6f4-f229-11e8-8dbf-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-2e6da6f4-f229-11e8-8dbf-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-27 17:46:19,154 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 27, 9, 46, 18, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-2e6da6f4-f229-11e8-8dbf-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3781075',
              'self_link': '/api/v1/namespaces/default/services/tf-2e6da6f4-f229-11e8-8dbf-b46bfcc83baa-worker-0-2',
              'uid': '4a547d1c-f229-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-2e6da6f4-f229-11e8-8dbf-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-27 17:46:19,161 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-2e6da6f4-f229-11e8-8dbf-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-2e6da6f4-f229-11e8-8dbf-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-27 17:46:19,172 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 27, 9, 46, 18, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-2e6da6f4-f229-11e8-8dbf-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3781078',
              'self_link': '/api/v1/namespaces/default/services/tf-2e6da6f4-f229-11e8-8dbf-b46bfcc83baa-worker-1-2',
              'uid': '4a598643-f229-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-2e6da6f4-f229-11e8-8dbf-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-27 17:47:00,653 INFO train_handler.py:102 ps: ['tf-2e6da6f4-f229-11e8-8dbf-b46bfcc83baa-ps-0-1:2222']
2018-11-27 17:47:02,915 INFO train_handler.py:104 worker: ['tf-2e6da6f4-f229-11e8-8dbf-b46bfcc83baa-worker-0-2:2222', 'tf-2e6da6f4-f229-11e8-8dbf-b46bfcc83baa-worker-1-2:2222']
2018-11-27 17:51:27,752 INFO disTf.py:31 start ...
2018-11-27 17:51:27,755 INFO disTf.py:21 service start ...
2018-11-27 17:51:31,694 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-27 17:51:35,362 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-27 17:51:36,798 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-0756da30-f22a-11e8-9e25-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-0756da30-f22a-11e8-9e25-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-27 17:51:36,838 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 27, 9, 51, 36, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-0756da30-f22a-11e8-9e25-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3784785',
              'self_link': '/api/v1/namespaces/default/services/tf-0756da30-f22a-11e8-9e25-b46bfcc83baa-ps-0-1',
              'uid': '07b16d8c-f22a-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-0756da30-f22a-11e8-9e25-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-27 17:51:36,870 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-0756da30-f22a-11e8-9e25-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-0756da30-f22a-11e8-9e25-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-27 17:51:36,926 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 27, 9, 51, 36, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-0756da30-f22a-11e8-9e25-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3784787',
              'self_link': '/api/v1/namespaces/default/services/tf-0756da30-f22a-11e8-9e25-b46bfcc83baa-worker-0-2',
              'uid': '07b8e8d6-f22a-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-0756da30-f22a-11e8-9e25-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-27 17:51:36,936 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-0756da30-f22a-11e8-9e25-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-0756da30-f22a-11e8-9e25-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-27 17:51:36,951 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 27, 9, 51, 36, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-0756da30-f22a-11e8-9e25-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3784789',
              'self_link': '/api/v1/namespaces/default/services/tf-0756da30-f22a-11e8-9e25-b46bfcc83baa-worker-1-2',
              'uid': '07c2d6b2-f22a-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-0756da30-f22a-11e8-9e25-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-27 17:51:45,221 INFO train_handler.py:102 ps: ['tf-0756da30-f22a-11e8-9e25-b46bfcc83baa-ps-0-1:2222']
2018-11-27 17:51:56,309 INFO train_handler.py:104 worker: ['tf-0756da30-f22a-11e8-9e25-b46bfcc83baa-worker-0-2:2222', 'tf-0756da30-f22a-11e8-9e25-b46bfcc83baa-worker-1-2:2222']
2018-11-27 17:54:02,104 INFO disTf.py:31 start ...
2018-11-27 17:54:02,107 INFO disTf.py:21 service start ...
2018-11-27 17:54:39,647 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-27 17:54:42,810 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-27 17:54:43,926 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-27 17:54:43,958 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 27, 9, 54, 43, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3786950',
              'self_link': '/api/v1/namespaces/default/services/tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-ps-0-1',
              'uid': '773a0091-f22a-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-27 17:54:43,965 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-27 17:54:43,998 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 27, 9, 54, 43, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3786951',
              'self_link': '/api/v1/namespaces/default/services/tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-0-2',
              'uid': '773db3b3-f22a-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-27 17:54:44,004 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-27 17:54:44,016 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 27, 9, 54, 43, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3786954',
              'self_link': '/api/v1/namespaces/default/services/tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-1-2',
              'uid': '77438992-f22a-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-27 17:54:51,246 INFO train_handler.py:102 ps: ['tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-ps-0-1:2222']
2018-11-27 17:54:53,221 INFO train_handler.py:104 worker: ['tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-0-2:2222', 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-1-2:2222']
2018-11-27 17:55:32,127 INFO train_handler.py:114 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 27, 9, 55, 30, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '930362e5-f22a-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-ps-0-1',
                         'tf': 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-ps-0-1'},
              'name': 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3787494',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-ps-0-1',
              'uid': '930362e5-f22a-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '930362e5-f22a-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '930362e5-f22a-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-ps-0-1',
                                               'tf': 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-ps-0-1'},
                                    'name': 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-ps-0-1:2222',
                                                            'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-0-2:2222,tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-1-2:2222',
                                                            '/xxx/',
                                                            '/yyy',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-27 17:56:06,008 INFO train_handler.py:114 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 27, 9, 56, 4, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'a773a832-f22a-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-0-2',
                         'tf': 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-0-2'},
              'name': 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3787921',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-0-2',
              'uid': 'a773a832-f22a-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'a773a832-f22a-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'a773a832-f22a-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-0-2',
                                               'tf': 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-0-2'},
                                    'name': 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-ps-0-1:2222',
                                                            'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-0-2:2222,tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-1-2:2222',
                                                            '/xxx/',
                                                            '/yyy',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-27 17:56:13,480 INFO train_handler.py:114 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 27, 9, 56, 12, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'ac5f171b-f22a-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-1-2',
                         'tf': 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-1-2'},
              'name': 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3788018',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-1-2',
              'uid': 'ac5f171b-f22a-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'ac5f171b-f22a-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'ac5f171b-f22a-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-1-2',
                                               'tf': 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-1-2'},
                                    'name': 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-ps-0-1:2222',
                                                            'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-0-2:2222,tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-1-2:2222',
                                                            '/xxx/',
                                                            '/yyy',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-76f4e35c-f22a-11e8-800b-b46bfcc83baa-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-27 17:59:14,451 INFO disTf.py:31 start ...
2018-11-27 17:59:14,453 INFO disTf.py:21 service start ...
2018-11-27 17:59:19,045 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-27 18:00:02,703 INFO disTf.py:31 start ...
2018-11-27 18:00:02,706 INFO disTf.py:21 service start ...
2018-11-27 18:01:03,397 INFO disTf.py:31 start ...
2018-11-27 18:01:03,401 INFO disTf.py:21 service start ...
2018-11-27 18:01:04,166 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-27 18:01:10,734 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-27 18:01:12,132 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-27 18:01:12,170 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 27, 10, 1, 11, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3791828',
              'self_link': '/api/v1/namespaces/default/services/tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-ps-0-1',
              'uid': '5e9f629d-f22b-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-27 18:01:12,179 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-27 18:01:12,192 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 27, 10, 1, 12, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3791830',
              'self_link': '/api/v1/namespaces/default/services/tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-worker-0-2',
              'uid': '5ea33a20-f22b-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-27 18:01:12,200 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-27 18:01:12,241 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 27, 10, 1, 12, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3791832',
              'self_link': '/api/v1/namespaces/default/services/tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-worker-1-2',
              'uid': '5ea65b64-f22b-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-27 18:01:14,862 INFO train_handler.py:102 ps: ['tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-ps-0-1:2222']
2018-11-27 18:01:15,182 INFO train_handler.py:104 worker: ['tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-worker-0-2:2222', 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-worker-1-2:2222']
2018-11-27 18:01:27,636 INFO train_handler.py:114 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 27, 10, 1, 26, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '674738af-f22b-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-ps-0-1',
                         'tf': 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-ps-0-1'},
              'name': 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3792009',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-ps-0-1',
              'uid': '674738af-f22b-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '674738af-f22b-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '674738af-f22b-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-ps-0-1',
                                               'tf': 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-ps-0-1'},
                                    'name': 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': None,
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-27 18:01:50,954 INFO train_handler.py:114 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 27, 10, 1, 49, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '75403efa-f22b-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-worker-0-2',
                         'tf': 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-worker-0-2'},
              'name': 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3792287',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-worker-0-2',
              'uid': '75403efa-f22b-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '75403efa-f22b-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '75403efa-f22b-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-worker-0-2',
                                               'tf': 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-worker-0-2'},
                                    'name': 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': None,
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-27 18:01:58,679 INFO train_handler.py:114 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 27, 10, 1, 56, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '79503cf0-f22b-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-worker-1-2',
                         'tf': 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-worker-1-2'},
              'name': 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '3792372',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-worker-1-2',
              'uid': '79503cf0-f22b-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '79503cf0-f22b-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '79503cf0-f22b-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-worker-1-2',
                                               'tf': 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-worker-1-2'},
                                    'name': 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': None,
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-5e452a0a-f22b-11e8-b5f1-b46bfcc83baa-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 12:35:51,347 INFO disTf.py:31 start ...
2018-11-28 12:35:51,350 INFO disTf.py:21 service start ...
2018-11-28 12:36:40,315 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-28 12:36:40,315 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-28 12:36:40,334 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 12:36:40,371 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 4, 36, 40, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4570874',
              'self_link': '/api/v1/namespaces/default/services/tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-ps-0-1',
              'uid': '3326b4fe-f2c7-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 12:36:40,373 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 12:36:40,380 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 4, 36, 40, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4570875',
              'self_link': '/api/v1/namespaces/default/services/tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-0-2',
              'uid': '3328831a-f2c7-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 12:36:40,382 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 12:36:40,388 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 4, 36, 40, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4570876',
              'self_link': '/api/v1/namespaces/default/services/tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-1-2',
              'uid': '3329c79d-f2c7-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 12:36:40,437 INFO train_handler.py:102 ps: ['tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-ps-0-1:2222']
2018-11-28 12:36:40,437 INFO train_handler.py:104 worker: ['tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-0-2:2222', 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-1-2:2222']
2018-11-28 12:36:40,503 INFO train_handler.py:114 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 4, 36, 40, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '333983ca-f2c7-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-ps-0-1',
                         'tf': 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-ps-0-1'},
              'name': 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4570880',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-ps-0-1',
              'uid': '333983ca-f2c7-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '333983ca-f2c7-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '333983ca-f2c7-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-ps-0-1',
                                               'tf': 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-ps-0-1'},
                                    'name': 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-ps-0-1:2222',
                                                            'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-0-2:2222,tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-1-2:2222',
                                                            '/xxx/',
                                                            '/yyy',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 12:36:40,519 INFO train_handler.py:114 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 4, 36, 40, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '333d2978-f2c7-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-0-2',
                         'tf': 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-0-2'},
              'name': 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4570881',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-0-2',
              'uid': '333d2978-f2c7-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '333d2978-f2c7-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '333d2978-f2c7-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-0-2',
                                               'tf': 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-0-2'},
                                    'name': 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-ps-0-1:2222',
                                                            'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-0-2:2222,tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-1-2:2222',
                                                            '/xxx/',
                                                            '/yyy',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 12:36:40,550 INFO train_handler.py:114 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 4, 36, 40, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '333f9619-f2c7-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-1-2',
                         'tf': 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-1-2'},
              'name': 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4570882',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-1-2',
              'uid': '333f9619-f2c7-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '333f9619-f2c7-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '333f9619-f2c7-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-1-2',
                                               'tf': 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-1-2'},
                                    'name': 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-ps-0-1:2222',
                                                            'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-0-2:2222,tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-1-2:2222',
                                                            '/xxx/',
                                                            '/yyy',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-3304a106-f2c7-11e8-84ab-b46bfcc83baa-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 13:23:37,111 INFO disTf.py:31 start ...
2018-11-28 13:23:37,113 INFO disTf.py:21 service start ...
2018-11-28 13:23:42,873 INFO disTf.py:31 start ...
2018-11-28 13:23:51,334 INFO disTf.py:31 start ...
2018-11-28 13:23:51,337 INFO disTf.py:21 service start ...
2018-11-28 13:23:57,051 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-28 13:23:57,052 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-28 13:23:57,071 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 13:23:57,099 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 5, 23, 57, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4604513',
              'self_link': '/api/v1/namespaces/default/services/tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-ps-0-1',
              'uid': 'cdff25e7-f2cd-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 13:23:57,101 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 13:23:57,124 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 5, 23, 57, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4604514',
              'self_link': '/api/v1/namespaces/default/services/tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-0-2',
              'uid': 'ce00c617-f2cd-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 13:23:57,126 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 13:23:57,140 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 5, 23, 57, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4604515',
              'self_link': '/api/v1/namespaces/default/services/tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-1-2',
              'uid': 'ce047cc9-f2cd-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 13:23:57,174 INFO train_handler.py:102 ps: ['tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-ps-0-1:2222']
2018-11-28 13:23:57,174 INFO train_handler.py:104 worker: ['tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-0-2:2222', 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-1-2:2222']
2018-11-28 13:23:57,217 INFO train_handler.py:114 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 5, 23, 57, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'ce105c7f-f2cd-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-ps-0-1',
                         'tf': 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-ps-0-1'},
              'name': 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4604520',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-ps-0-1',
              'uid': 'ce105c7f-f2cd-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'ce105c7f-f2cd-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'ce105c7f-f2cd-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-ps-0-1',
                                               'tf': 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-ps-0-1'},
                                    'name': 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-ps-0-1:2222',
                                                            'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-0-2:2222,tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-1-2:2222',
                                                            '/xxx/',
                                                            '/yyy',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 13:23:57,262 INFO train_handler.py:114 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 5, 23, 57, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'ce130a10-f2cd-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-0-2',
                         'tf': 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-0-2'},
              'name': 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4604522',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-0-2',
              'uid': 'ce130a10-f2cd-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'ce130a10-f2cd-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'ce130a10-f2cd-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-0-2',
                                               'tf': 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-0-2'},
                                    'name': 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-ps-0-1:2222',
                                                            'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-0-2:2222,tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-1-2:2222',
                                                            '/xxx/',
                                                            '/yyy',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 13:23:57,294 INFO train_handler.py:114 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 5, 23, 57, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'ce19ee21-f2cd-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-1-2',
                         'tf': 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-1-2'},
              'name': 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4604527',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-1-2',
              'uid': 'ce19ee21-f2cd-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'ce19ee21-f2cd-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'ce19ee21-f2cd-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-1-2',
                                               'tf': 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-1-2'},
                                    'name': 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-ps-0-1:2222',
                                                            'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-0-2:2222,tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-1-2:2222',
                                                            '/xxx/',
                                                            '/yyy',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-cdd86398-f2cd-11e8-a69e-b46bfcc83baa-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 13:26:55,721 INFO disTf.py:31 start ...
2018-11-28 13:26:55,724 INFO disTf.py:21 service start ...
2018-11-28 13:26:58,414 INFO train_handler.py:141 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-28 13:27:08,836 INFO train_handler.py:144 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-28 13:27:10,996 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 13:27:11,047 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 5, 27, 11, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4606843',
              'self_link': '/api/v1/namespaces/default/services/tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-ps-0-1',
              'uid': '4196e770-f2ce-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 13:27:11,058 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 13:27:11,073 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 5, 27, 11, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4606845',
              'self_link': '/api/v1/namespaces/default/services/tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-0-2',
              'uid': '419cf8ef-f2ce-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 13:27:11,083 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 13:27:11,103 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 5, 27, 11, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4606847',
              'self_link': '/api/v1/namespaces/default/services/tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-1-2',
              'uid': '41a18f40-f2ce-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 13:27:17,021 INFO train_handler.py:102 ps: ['tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-ps-0-1:2222']
2018-11-28 13:27:17,740 INFO train_handler.py:104 worker: ['tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-0-2:2222', 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-1-2:2222']
2018-11-28 13:45:18,322 INFO train_handler.py:114 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 5, 45, 11, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'c58cbf6d-f2d0-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-ps-0-1',
                         'tf': 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-ps-0-1'},
              'name': 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4619425',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-ps-0-1',
              'uid': 'c58cbf6d-f2d0-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'c58cbf6d-f2d0-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'c58cbf6d-f2d0-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-ps-0-1',
                                               'tf': 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-ps-0-1'},
                                    'name': 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'ps',
                                                            '0',
                                                            'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-ps-0-1:2222',
                                                            'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-0-2:2222,tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-1-2:2222',
                                                            '/xxx/',
                                                            '/yyy',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 13:45:25,138 INFO train_handler.py:114 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 5, 45, 24, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'cd5bbd05-f2d0-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-0-2',
                         'tf': 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-0-2'},
              'name': 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4619591',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-0-2',
              'uid': 'cd5bbd05-f2d0-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'cd5bbd05-f2d0-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'cd5bbd05-f2d0-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-0-2',
                                               'tf': 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-0-2'},
                                    'name': 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '0',
                                                            'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-ps-0-1:2222',
                                                            'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-0-2:2222,tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-1-2:2222',
                                                            '/xxx/',
                                                            '/yyy',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 13:45:30,591 INFO train_handler.py:114 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 5, 45, 30, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'd0beec71-f2d0-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-1-2',
                         'tf': 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-1-2'},
              'name': 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4619666',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-1-2',
              'uid': 'd0beec71-f2d0-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'd0beec71-f2d0-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'd0beec71-f2d0-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-1-2',
                                               'tf': 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-1-2'},
                                    'name': 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['/notebooks/entry.sh',
                                                            'worker',
                                                            '1',
                                                            'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-ps-0-1:2222',
                                                            'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-0-2:2222,tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-1-2:2222',
                                                            '/xxx/',
                                                            '/yyy',
                                                            '/tmp',
                                                            'http://192.168.11.39:14000',
                                                            'hdfs://192.168.11.39'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-409ace8c-f2ce-11e8-838b-b46bfcc83baa-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 14:04:18,212 INFO disTf.py:31 start ...
2018-11-28 14:04:18,215 INFO disTf.py:21 service start ...
2018-11-28 14:04:22,757 INFO train_handler.py:144 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "/xxx/",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-28 14:04:26,204 INFO train_handler.py:147 parse data: {'type': 'tensorflow', 'file': '/xxx/', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-28 14:04:27,424 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-76145834-f2d3-11e8-aafe-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-76145834-f2d3-11e8-aafe-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 14:04:27,549 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 6, 4, 27, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-76145834-f2d3-11e8-aafe-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4633000',
              'self_link': '/api/v1/namespaces/default/services/tf-76145834-f2d3-11e8-aafe-b46bfcc83baa-ps-0-1',
              'uid': '76aac05f-f2d3-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-76145834-f2d3-11e8-aafe-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 14:04:27,564 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-76145834-f2d3-11e8-aafe-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-76145834-f2d3-11e8-aafe-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 14:04:27,632 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 6, 4, 27, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-76145834-f2d3-11e8-aafe-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4633002',
              'self_link': '/api/v1/namespaces/default/services/tf-76145834-f2d3-11e8-aafe-b46bfcc83baa-worker-0-2',
              'uid': '76b8738a-f2d3-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-76145834-f2d3-11e8-aafe-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 14:04:27,648 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-76145834-f2d3-11e8-aafe-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-76145834-f2d3-11e8-aafe-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 14:04:27,672 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 6, 4, 27, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-76145834-f2d3-11e8-aafe-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4633005',
              'self_link': '/api/v1/namespaces/default/services/tf-76145834-f2d3-11e8-aafe-b46bfcc83baa-worker-1-2',
              'uid': '76be8f09-f2d3-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-76145834-f2d3-11e8-aafe-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 14:04:33,188 INFO train_handler.py:105 ps: ['tf-76145834-f2d3-11e8-aafe-b46bfcc83baa-ps-0-1:2222']
2018-11-28 14:04:33,782 INFO train_handler.py:107 worker: ['tf-76145834-f2d3-11e8-aafe-b46bfcc83baa-worker-0-2:2222', 'tf-76145834-f2d3-11e8-aafe-b46bfcc83baa-worker-1-2:2222']
2018-11-28 14:06:46,793 INFO disTf.py:31 start ...
2018-11-28 14:06:46,796 INFO disTf.py:21 service start ...
2018-11-28 14:06:56,839 INFO train_handler.py:144 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "mnist-dis.py",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-28 14:07:04,834 INFO train_handler.py:147 parse data: {'type': 'tensorflow', 'file': 'mnist-dis.py', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-28 14:07:07,552 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 14:07:07,604 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 6, 7, 7, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4634908',
              'self_link': '/api/v1/namespaces/default/services/tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-ps-0-1',
              'uid': 'd6113956-f2d3-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 14:07:07,616 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 14:07:07,628 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 6, 7, 7, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4634910',
              'self_link': '/api/v1/namespaces/default/services/tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-0-2',
              'uid': 'd617a768-f2d3-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 14:07:07,637 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 14:07:07,649 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 6, 7, 7, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4634912',
              'self_link': '/api/v1/namespaces/default/services/tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-1-2',
              'uid': 'd61ad613-f2d3-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 14:07:09,106 INFO train_handler.py:105 ps: ['tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-ps-0-1:2222']
2018-11-28 14:07:09,107 INFO train_handler.py:107 worker: ['tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-0-2:2222', 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-1-2:2222']
2018-11-28 14:07:14,641 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 6, 7, 14, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'da4271b9-f2d3-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-ps-0-1',
                         'tf': 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-ps-0-1'},
              'name': 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4634994',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-ps-0-1',
              'uid': 'da4271b9-f2d3-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'da4271b9-f2d3-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'da4271b9-f2d3-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-ps-0-1',
                                               'tf': 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-ps-0-1'},
                                    'name': 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': ['mnist-dis.py',
                                                         '--jobe_name = ps',
                                                         '--task_index=0',
                                                         '--ps_host=tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-ps-0-1:2222',
                                                         '--worker_hosts=tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-0-2:2222,tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-1-2:2222'],
                                                'command': ['python'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 14:07:34,985 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 6, 7, 35, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'e65d7f51-f2d3-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-0-2',
                         'tf': 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-0-2'},
              'name': 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4635249',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-0-2',
              'uid': 'e65d7f51-f2d3-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'e65d7f51-f2d3-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'e65d7f51-f2d3-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-0-2',
                                               'tf': 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-0-2'},
                                    'name': 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': ['mnist-dis.py',
                                                         '--jobe_name = worker',
                                                         '--task_index=0',
                                                         '--ps_host=tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-ps-0-1:2222',
                                                         '--worker_hosts=tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-0-2:2222,tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-1-2:2222'],
                                                'command': ['python'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 14:07:37,573 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 6, 7, 37, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'e7ebb0bb-f2d3-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-1-2',
                         'tf': 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-1-2'},
              'name': 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4635283',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-1-2',
              'uid': 'e7ebb0bb-f2d3-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'e7ebb0bb-f2d3-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'e7ebb0bb-f2d3-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-1-2',
                                               'tf': 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-1-2'},
                                    'name': 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': ['mnist-dis.py',
                                                         '--jobe_name = worker',
                                                         '--task_index=1',
                                                         '--ps_host=tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-ps-0-1:2222',
                                                         '--worker_hosts=tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-0-2:2222,tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-1-2:2222'],
                                                'command': ['python'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-d4e8dddc-f2d3-11e8-84ab-b46bfcc83baa-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 14:10:35,774 INFO disTf.py:31 start ...
2018-11-28 14:10:35,777 INFO disTf.py:21 service start ...
2018-11-28 14:10:38,706 INFO train_handler.py:144 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "mnist-dis.py",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-28 14:10:40,511 INFO train_handler.py:147 parse data: {'type': 'tensorflow', 'file': 'mnist-dis.py', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-28 14:10:42,245 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-551c881c-f2d4-11e8-bdef-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-551c881c-f2d4-11e8-bdef-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 14:10:42,399 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 6, 10, 42, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-551c881c-f2d4-11e8-bdef-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4637611',
              'self_link': '/api/v1/namespaces/default/services/tf-551c881c-f2d4-11e8-bdef-b46bfcc83baa-ps-0-1',
              'uid': '5616f77b-f2d4-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-551c881c-f2d4-11e8-bdef-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 14:10:42,414 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-551c881c-f2d4-11e8-bdef-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-551c881c-f2d4-11e8-bdef-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 14:10:42,429 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 6, 10, 42, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-551c881c-f2d4-11e8-bdef-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4637615',
              'self_link': '/api/v1/namespaces/default/services/tf-551c881c-f2d4-11e8-bdef-b46bfcc83baa-worker-0-2',
              'uid': '56201602-f2d4-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-551c881c-f2d4-11e8-bdef-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 14:10:42,436 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-551c881c-f2d4-11e8-bdef-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-551c881c-f2d4-11e8-bdef-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 14:10:42,500 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 6, 10, 42, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-551c881c-f2d4-11e8-bdef-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4637618',
              'self_link': '/api/v1/namespaces/default/services/tf-551c881c-f2d4-11e8-bdef-b46bfcc83baa-worker-1-2',
              'uid': '5625c275-f2d4-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-551c881c-f2d4-11e8-bdef-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 14:10:48,501 INFO train_handler.py:105 ps: ['tf-551c881c-f2d4-11e8-bdef-b46bfcc83baa-ps-0-1:2222']
2018-11-28 14:10:50,752 INFO train_handler.py:107 worker: ['tf-551c881c-f2d4-11e8-bdef-b46bfcc83baa-worker-0-2:2222', 'tf-551c881c-f2d4-11e8-bdef-b46bfcc83baa-worker-1-2:2222']
2018-11-28 14:14:11,756 INFO disTf.py:31 start ...
2018-11-28 14:14:11,760 INFO disTf.py:21 service start ...
2018-11-28 14:14:13,491 INFO train_handler.py:144 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "mnist-dis.py",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-28 14:14:18,774 INFO train_handler.py:147 parse data: {'type': 'tensorflow', 'file': 'mnist-dis.py', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-28 14:14:19,929 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 14:14:19,970 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 6, 14, 20, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4640329',
              'self_link': '/api/v1/namespaces/default/services/tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-ps-0-1',
              'uid': 'd7c9d662-f2d4-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 14:14:19,977 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 14:14:19,990 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 6, 14, 20, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4640331',
              'self_link': '/api/v1/namespaces/default/services/tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-0-2',
              'uid': 'd7cd8931-f2d4-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 14:14:19,998 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 14:14:20,051 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 6, 14, 20, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4640333',
              'self_link': '/api/v1/namespaces/default/services/tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-1-2',
              'uid': 'd7d0e31c-f2d4-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 14:14:20,390 INFO train_handler.py:105 ps: ['tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-ps-0-1:2222']
2018-11-28 14:14:20,390 INFO train_handler.py:107 worker: ['tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-0-2:2222', 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-1-2:2222']
2018-11-28 14:14:21,709 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 6, 14, 21, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'd8d06c43-f2d4-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-ps-0-1',
                         'tf': 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-ps-0-1'},
              'name': 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4640357',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-ps-0-1',
              'uid': 'd8d06c43-f2d4-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'd8d06c43-f2d4-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'd8d06c43-f2d4-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-ps-0-1',
                                               'tf': 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-ps-0-1'},
                                    'name': 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': ['mnist-dis.py',
                                                         '--job_name = ps',
                                                         '--task_index=0',
                                                         '--ps_host=tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-ps-0-1:2222',
                                                         '--worker_hosts=tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-0-2:2222,tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-1-2:2222'],
                                                'command': ['python'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 14:14:23,100 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 6, 14, 23, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'd99d6f48-f2d4-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-0-2',
                         'tf': 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-0-2'},
              'name': 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4640381',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-0-2',
              'uid': 'd99d6f48-f2d4-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'd99d6f48-f2d4-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'd99d6f48-f2d4-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-0-2',
                                               'tf': 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-0-2'},
                                    'name': 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': ['mnist-dis.py',
                                                         '--job_name = worker',
                                                         '--task_index=0',
                                                         '--ps_host=tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-ps-0-1:2222',
                                                         '--worker_hosts=tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-0-2:2222,tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-1-2:2222'],
                                                'command': ['python'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 14:14:24,636 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 6, 14, 24, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'da8f0d86-f2d4-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-1-2',
                         'tf': 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-1-2'},
              'name': 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4640408',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-1-2',
              'uid': 'da8f0d86-f2d4-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'da8f0d86-f2d4-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'da8f0d86-f2d4-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-1-2',
                                               'tf': 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-1-2'},
                                    'name': 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': ['mnist-dis.py',
                                                         '--job_name = worker',
                                                         '--task_index=1',
                                                         '--ps_host=tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-ps-0-1:2222',
                                                         '--worker_hosts=tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-0-2:2222,tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-1-2:2222'],
                                                'command': ['python'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-d73d9e5c-f2d4-11e8-9f3a-b46bfcc83baa-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 15:03:07,632 INFO disTf.py:31 start ...
2018-11-28 15:03:29,356 INFO disTf.py:31 start ...
2018-11-28 15:03:29,360 INFO disTf.py:21 service start ...
2018-11-28 15:03:32,779 INFO train_handler.py:144 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "mnist-dis.py",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-28 15:03:34,727 INFO train_handler.py:147 parse data: {'type': 'tensorflow', 'file': 'mnist-dis.py', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-28 15:03:36,048 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 15:03:36,094 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 3, 36, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4675065',
              'self_link': '/api/v1/namespaces/default/services/tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-ps-0-1',
              'uid': 'b9cba229-f2db-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 15:03:36,101 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 15:03:36,176 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 3, 36, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4675068',
              'self_link': '/api/v1/namespaces/default/services/tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-0-2',
              'uid': 'b9d2b93b-f2db-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 15:03:36,199 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 15:03:36,223 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 3, 36, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4675072',
              'self_link': '/api/v1/namespaces/default/services/tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-1-2',
              'uid': 'b9e0efac-f2db-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 15:03:40,425 INFO train_handler.py:105 ps: ['tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-ps-0-1:2222']
2018-11-28 15:03:41,832 INFO train_handler.py:107 worker: ['tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-0-2:2222', 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-1-2:2222']
2018-11-28 15:04:23,291 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 4, 23, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'd5eacd3a-f2db-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-ps-0-1',
                         'tf': 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-ps-0-1'},
              'name': 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4675611',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-ps-0-1',
              'uid': 'd5eacd3a-f2db-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'd5eacd3a-f2db-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'd5eacd3a-f2db-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-ps-0-1',
                                               'tf': 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-ps-0-1'},
                                    'name': 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': ['mnist-dis.py',
                                                         '--job_name = ps',
                                                         '--task_index=0',
                                                         '--ps_host=tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-ps-0-1:2222',
                                                         '--worker_hosts=tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-0-2:2222,tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-1-2:2222'],
                                                'command': ['python'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 15:04:24,947 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 4, 25, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'd6e419f5-f2db-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-0-2',
                         'tf': 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-0-2'},
              'name': 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4675633',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-0-2',
              'uid': 'd6e419f5-f2db-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'd6e419f5-f2db-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'd6e419f5-f2db-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-0-2',
                                               'tf': 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-0-2'},
                                    'name': 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': ['mnist-dis.py',
                                                         '--job_name = worker',
                                                         '--task_index=0',
                                                         '--ps_host=tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-ps-0-1:2222',
                                                         '--worker_hosts=tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-0-2:2222,tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-1-2:2222'],
                                                'command': ['python'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 15:04:27,956 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 4, 28, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'd8b3cea9-f2db-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-1-2',
                         'tf': 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-1-2'},
              'name': 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4675677',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-1-2',
              'uid': 'd8b3cea9-f2db-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'd8b3cea9-f2db-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'd8b3cea9-f2db-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-1-2',
                                               'tf': 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-1-2'},
                                    'name': 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': ['mnist-dis.py',
                                                         '--job_name = worker',
                                                         '--task_index=1',
                                                         '--ps_host=tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-ps-0-1:2222',
                                                         '--worker_hosts=tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-0-2:2222,tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-1-2:2222'],
                                                'command': ['python'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-b92ee928-f2db-11e8-a9b4-b46bfcc83baa-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 15:18:07,306 INFO disTf.py:31 start ...
2018-11-28 15:18:07,311 INFO disTf.py:21 service start ...
2018-11-28 15:18:09,879 INFO train_handler.py:144 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "mnist-dis.py",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-28 15:18:09,879 INFO train_handler.py:147 parse data: {'type': 'tensorflow', 'file': 'mnist-dis.py', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-28 15:18:09,896 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 15:18:09,925 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 18, 10, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4685679',
              'self_link': '/api/v1/namespaces/default/services/tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-ps-0-1',
              'uid': 'c2a81632-f2dd-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 15:18:09,927 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 15:18:09,938 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 18, 10, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4685681',
              'self_link': '/api/v1/namespaces/default/services/tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-worker-0-2',
              'uid': 'c2a9bb8d-f2dd-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 15:18:09,940 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 15:18:09,957 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 18, 10, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4685683',
              'self_link': '/api/v1/namespaces/default/services/tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-worker-1-2',
              'uid': 'c2abdb9d-f2dd-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 15:18:10,011 INFO train_handler.py:105 ps: ['tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-ps-0-1:2222']
2018-11-28 15:18:10,011 INFO train_handler.py:107 worker: ['tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-worker-0-2:2222', 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-worker-1-2:2222']
2018-11-28 15:18:10,068 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 18, 10, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'c2bcaaf2-f2dd-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-ps-0-1',
                         'tf': 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-ps-0-1'},
              'name': 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4685685',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-ps-0-1',
              'uid': 'c2bcaaf2-f2dd-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'c2bcaaf2-f2dd-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'c2bcaaf2-f2dd-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-ps-0-1',
                                               'tf': 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-ps-0-1'},
                                    'name': 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': None,
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 15:18:10,097 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 18, 10, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'c2c0c107-f2dd-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-worker-0-2',
                         'tf': 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-worker-0-2'},
              'name': 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4685690',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-worker-0-2',
              'uid': 'c2c0c107-f2dd-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'c2c0c107-f2dd-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'c2c0c107-f2dd-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-worker-0-2',
                                               'tf': 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-worker-0-2'},
                                    'name': 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': None,
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 15:18:10,151 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 18, 10, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'c2c4249b-f2dd-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-worker-1-2',
                         'tf': 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-worker-1-2'},
              'name': 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4685695',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-worker-1-2',
              'uid': 'c2c4249b-f2dd-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'c2c4249b-f2dd-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'c2c4249b-f2dd-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-worker-1-2',
                                               'tf': 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-worker-1-2'},
                                    'name': 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': None,
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-c272c49a-f2dd-11e8-9d5e-b46bfcc83baa-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 15:20:08,021 INFO disTf.py:31 start ...
2018-11-28 15:20:08,023 INFO disTf.py:21 service start ...
2018-11-28 15:20:12,044 INFO train_handler.py:144 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "mnist-dis.py",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-28 15:20:12,045 INFO train_handler.py:147 parse data: {'type': 'tensorflow', 'file': 'mnist-dis.py', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-28 15:20:12,062 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 15:20:12,316 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 20, 12, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4687146',
              'self_link': '/api/v1/namespaces/default/services/tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-ps-0-1',
              'uid': '0b999143-f2de-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 15:20:12,327 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 15:20:12,349 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 20, 12, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4687148',
              'self_link': '/api/v1/namespaces/default/services/tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-worker-0-2',
              'uid': '0ba02106-f2de-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 15:20:12,354 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 15:20:12,366 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 20, 12, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4687150',
              'self_link': '/api/v1/namespaces/default/services/tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-worker-1-2',
              'uid': '0ba2e9fc-f2de-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 15:20:12,465 INFO train_handler.py:105 ps: ['tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-ps-0-1:2222']
2018-11-28 15:20:12,466 INFO train_handler.py:107 worker: ['tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-worker-0-2:2222', 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-worker-1-2:2222']
2018-11-28 15:20:12,533 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 20, 12, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '0bbbab1b-f2de-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-ps-0-1',
                         'tf': 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-ps-0-1'},
              'name': 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4687152',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-ps-0-1',
              'uid': '0bbbab1b-f2de-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '0bbbab1b-f2de-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '0bbbab1b-f2de-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-ps-0-1',
                                               'tf': 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-ps-0-1'},
                                    'name': 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['sleep', '3600'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 15:20:12,573 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 20, 12, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '0bbf51c9-f2de-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-worker-0-2',
                         'tf': 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-worker-0-2'},
              'name': 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4687156',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-worker-0-2',
              'uid': '0bbf51c9-f2de-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '0bbf51c9-f2de-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '0bbf51c9-f2de-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-worker-0-2',
                                               'tf': 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-worker-0-2'},
                                    'name': 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['sleep', '3600'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 15:20:12,608 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 20, 12, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '0bc5f9e2-f2de-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-worker-1-2',
                         'tf': 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-worker-1-2'},
              'name': 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4687163',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-worker-1-2',
              'uid': '0bc5f9e2-f2de-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '0bc5f9e2-f2de-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '0bc5f9e2-f2de-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-worker-1-2',
                                               'tf': 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-worker-1-2'},
                                    'name': 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['sleep', '3600'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-0b43cf46-f2de-11e8-ba8a-b46bfcc83baa-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 15:23:01,492 INFO disTf.py:31 start ...
2018-11-28 15:23:01,496 INFO disTf.py:21 service start ...
2018-11-28 15:23:04,886 INFO train_handler.py:142 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "mnist-dis.py",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-28 15:23:04,886 INFO train_handler.py:145 parse data: {'type': 'tensorflow', 'file': 'mnist-dis.py', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-28 15:23:04,902 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 15:23:05,014 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 23, 5, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4689199',
              'self_link': '/api/v1/namespaces/default/services/tf-724933c6-f2de-11e8-8955-b46bfcc83baa-ps-0-1',
              'uid': '728b0195-f2de-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 15:23:05,020 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 15:23:05,042 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 23, 5, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4689201',
              'self_link': '/api/v1/namespaces/default/services/tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-0-2',
              'uid': '72906727-f2de-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 15:23:05,044 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 15:23:05,104 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 23, 5, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4689203',
              'self_link': '/api/v1/namespaces/default/services/tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-1-2',
              'uid': '72976995-f2de-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 15:23:05,218 INFO train_handler.py:103 ps: ['tf-724933c6-f2de-11e8-8955-b46bfcc83baa-ps-0-1:2222']
2018-11-28 15:23:05,219 INFO train_handler.py:105 worker: ['tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-0-2:2222', 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-1-2:2222']
2018-11-28 15:23:05,284 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 23, 5, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '72b3dd4d-f2de-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-ps-0-1',
                         'tf': 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-ps-0-1'},
              'name': 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4689206',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-724933c6-f2de-11e8-8955-b46bfcc83baa-ps-0-1',
              'uid': '72b3dd4d-f2de-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '72b3dd4d-f2de-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '72b3dd4d-f2de-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-ps-0-1',
                                               'tf': 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-ps-0-1'},
                                    'name': 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'mnist-dis.py',
                                                            '--job_name = ps',
                                                            '--task_index=0',
                                                            '--ps_host=tf-724933c6-f2de-11e8-8955-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-0-2:2222,tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-1-2:2222'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 15:23:05,314 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 23, 5, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '72b93619-f2de-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-0-2',
                         'tf': 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-0-2'},
              'name': 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4689211',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-0-2',
              'uid': '72b93619-f2de-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '72b93619-f2de-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '72b93619-f2de-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-0-2',
                                               'tf': 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-0-2'},
                                    'name': 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'mnist-dis.py',
                                                            '--job_name = '
                                                            'worker',
                                                            '--task_index=0',
                                                            '--ps_host=tf-724933c6-f2de-11e8-8955-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-0-2:2222,tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-1-2:2222'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 15:23:05,376 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 23, 5, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '72c0cbc4-f2de-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-1-2',
                         'tf': 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-1-2'},
              'name': 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4689214',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-1-2',
              'uid': '72c0cbc4-f2de-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '72c0cbc4-f2de-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '72c0cbc4-f2de-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-1-2',
                                               'tf': 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-1-2'},
                                    'name': 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'mnist-dis.py',
                                                            '--job_name = '
                                                            'worker',
                                                            '--task_index=1',
                                                            '--ps_host=tf-724933c6-f2de-11e8-8955-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-0-2:2222,tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-1-2:2222'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-724933c6-f2de-11e8-8955-b46bfcc83baa-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 15:28:42,797 INFO disTf.py:31 start ...
2018-11-28 15:28:42,800 INFO disTf.py:21 service start ...
2018-11-28 15:28:46,652 INFO train_handler.py:142 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "mnist-dis.py",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-28 15:28:46,652 INFO train_handler.py:145 parse data: {'type': 'tensorflow', 'file': 'mnist-dis.py', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-28 15:28:46,670 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 15:28:46,701 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 28, 47, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4694011',
              'self_link': '/api/v1/namespaces/default/services/tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-ps-0-1',
              'uid': '3e358ec3-f2df-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 15:28:46,703 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 15:28:46,710 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 28, 47, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4694012',
              'self_link': '/api/v1/namespaces/default/services/tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-0-2',
              'uid': '3e376526-f2df-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 15:28:46,713 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 15:28:46,722 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 28, 47, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4694015',
              'self_link': '/api/v1/namespaces/default/services/tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-1-2',
              'uid': '3e38fa7a-f2df-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 15:28:46,777 INFO train_handler.py:103 ps: ['tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-ps-0-1:2222']
2018-11-28 15:28:46,777 INFO train_handler.py:105 worker: ['tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-0-2:2222', 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-1-2:2222']
2018-11-28 15:28:46,819 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 28, 47, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '3e46e061-f2df-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-ps-0-1',
                         'tf': 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-ps-0-1'},
              'name': 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4694017',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-ps-0-1',
              'uid': '3e46e061-f2df-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '3e46e061-f2df-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '3e46e061-f2df-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-ps-0-1',
                                               'tf': 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-ps-0-1'},
                                    'name': 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'mnist-dis.py',
                                                            '--job_name = ps',
                                                            '--task_index=0',
                                                            '--ps_host=tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-0-2:2222,tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-1-2:2222'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 15:28:46,838 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 28, 47, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '3e49eb68-f2df-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-0-2',
                         'tf': 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-0-2'},
              'name': 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4694018',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-0-2',
              'uid': '3e49eb68-f2df-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '3e49eb68-f2df-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '3e49eb68-f2df-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-0-2',
                                               'tf': 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-0-2'},
                                    'name': 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'mnist-dis.py',
                                                            '--job_name = '
                                                            'worker',
                                                            '--task_index=0',
                                                            '--ps_host=tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-0-2:2222,tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-1-2:2222'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 15:28:46,929 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 28, 47, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '3e4c9cb6-f2df-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-1-2',
                         'tf': 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-1-2'},
              'name': 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4694024',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-1-2',
              'uid': '3e4c9cb6-f2df-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '3e4c9cb6-f2df-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '3e4c9cb6-f2df-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-1-2',
                                               'tf': 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-1-2'},
                                    'name': 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'mnist-dis.py',
                                                            '--job_name = '
                                                            'worker',
                                                            '--task_index=1',
                                                            '--ps_host=tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-0-2:2222,tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-1-2:2222'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-3dfea5cc-f2df-11e8-adba-b46bfcc83baa-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 15:35:59,389 INFO train_handler.py:142 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "mnist-dis.py",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-28 15:35:59,389 INFO train_handler.py:145 parse data: {'type': 'tensorflow', 'file': 'mnist-dis.py', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-28 15:35:59,401 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 15:35:59,449 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 35, 59, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4699350',
              'self_link': '/api/v1/namespaces/default/services/tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-ps-0-1',
              'uid': '4026e1d3-f2e0-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 15:35:59,451 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 15:35:59,461 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 35, 59, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4699352',
              'self_link': '/api/v1/namespaces/default/services/tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-0-2',
              'uid': '4028bf9b-f2e0-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 15:35:59,463 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 15:35:59,478 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 35, 59, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4699354',
              'self_link': '/api/v1/namespaces/default/services/tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-1-2',
              'uid': '402a3d5a-f2e0-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 15:35:59,504 INFO train_handler.py:103 ps: ['tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-ps-0-1:2222']
2018-11-28 15:35:59,504 INFO train_handler.py:105 worker: ['tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-0-2:2222', 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-1-2:2222']
2018-11-28 15:35:59,535 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 35, 59, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '4033a36c-f2e0-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-ps-0-1',
                         'tf': 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-ps-0-1'},
              'name': 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4699356',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-ps-0-1',
              'uid': '4033a36c-f2e0-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '4033a36c-f2e0-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '4033a36c-f2e0-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-ps-0-1',
                                               'tf': 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-ps-0-1'},
                                    'name': 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'mnist-dis.py',
                                                            '--job_name = ps',
                                                            '--task_index=0',
                                                            '--ps_host=tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-0-2:2222,tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-1-2:2222'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 15:35:59,574 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 35, 59, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '4035dc38-f2e0-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-0-2',
                         'tf': 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-0-2'},
              'name': 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4699357',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-0-2',
              'uid': '4035dc38-f2e0-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '4035dc38-f2e0-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '4035dc38-f2e0-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-0-2',
                                               'tf': 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-0-2'},
                                    'name': 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'mnist-dis.py',
                                                            '--job_name = '
                                                            'worker',
                                                            '--task_index=0',
                                                            '--ps_host=tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-0-2:2222,tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-1-2:2222'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 15:35:59,597 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 7, 35, 59, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '403bfdfb-f2e0-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-1-2',
                         'tf': 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-1-2'},
              'name': 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4699359',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-1-2',
              'uid': '403bfdfb-f2e0-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '403bfdfb-f2e0-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '403bfdfb-f2e0-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-1-2',
                                               'tf': 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-1-2'},
                                    'name': 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'mnist-dis.py',
                                                            '--job_name = '
                                                            'worker',
                                                            '--task_index=1',
                                                            '--ps_host=tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-0-2:2222,tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-1-2:2222'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-3fed081e-f2e0-11e8-b007-b46bfcc83baa-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 16:11:52,096 INFO disTf.py:31 start ...
2018-11-28 16:11:52,098 INFO disTf.py:21 service start ...
2018-11-28 16:12:00,199 INFO train_handler.py:142 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "mnist-dis.py",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-28 16:12:00,200 INFO train_handler.py:145 parse data: {'type': 'tensorflow', 'file': 'mnist-dis.py', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-28 16:12:00,216 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 16:12:00,243 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 8, 12, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4724974',
              'self_link': '/api/v1/namespaces/default/services/tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-ps-0-1',
              'uid': '481a779b-f2e5-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 16:12:00,245 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 16:12:00,256 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 8, 12, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4724976',
              'self_link': '/api/v1/namespaces/default/services/tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-0-2',
              'uid': '481c371d-f2e5-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 16:12:00,258 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 16:12:00,273 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 8, 12, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4724979',
              'self_link': '/api/v1/namespaces/default/services/tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-1-2',
              'uid': '481e24e2-f2e5-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 16:12:00,329 INFO train_handler.py:103 ps: ['tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-ps-0-1:2222']
2018-11-28 16:12:00,329 INFO train_handler.py:105 worker: ['tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-0-2:2222', 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-1-2:2222']
2018-11-28 16:12:00,371 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 8, 12, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '482deb9a-f2e5-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-ps-0-1',
                         'tf': 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-ps-0-1'},
              'name': 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4724981',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-ps-0-1',
              'uid': '482deb9a-f2e5-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '482deb9a-f2e5-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '482deb9a-f2e5-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-ps-0-1',
                                               'tf': 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-ps-0-1'},
                                    'name': 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'mnist-dis.py',
                                                            '--job_name = ps',
                                                            '--task_index=0',
                                                            '--ps_host=tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-0-2:2222,tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-1-2:2222',
                                                            'data_dir=/tmp',
                                                            'export_dir=/tmp'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 16:12:00,411 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 8, 12, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '482ffe42-f2e5-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-0-2',
                         'tf': 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-0-2'},
              'name': 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4724984',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-0-2',
              'uid': '482ffe42-f2e5-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '482ffe42-f2e5-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '482ffe42-f2e5-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-0-2',
                                               'tf': 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-0-2'},
                                    'name': 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'mnist-dis.py',
                                                            '--job_name = '
                                                            'worker',
                                                            '--task_index=0',
                                                            '--ps_host=tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-0-2:2222,tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-1-2:2222',
                                                            'data_dir=/tmp',
                                                            'export_dir=/tmp'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 16:12:00,435 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 8, 12, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '4835fe8d-f2e5-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-1-2',
                         'tf': 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-1-2'},
              'name': 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4724990',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-1-2',
              'uid': '4835fe8d-f2e5-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '4835fe8d-f2e5-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '4835fe8d-f2e5-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-1-2',
                                               'tf': 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-1-2'},
                                    'name': 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'mnist-dis.py',
                                                            '--job_name = '
                                                            'worker',
                                                            '--task_index=1',
                                                            '--ps_host=tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-0-2:2222,tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-1-2:2222',
                                                            'data_dir=/tmp',
                                                            'export_dir=/tmp'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-47de8f52-f2e5-11e8-8220-b46bfcc83baa-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 16:17:09,237 INFO disTf.py:31 start ...
2018-11-28 16:17:17,356 INFO disTf.py:31 start ...
2018-11-28 16:17:17,359 INFO disTf.py:21 service start ...
2018-11-28 16:17:29,407 INFO train_handler.py:142 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "mnist-dis.py",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-28 16:17:29,407 INFO train_handler.py:145 parse data: {'type': 'tensorflow', 'file': 'mnist-dis.py', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-28 16:17:29,423 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 16:17:29,512 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 8, 17, 29, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4729040',
              'self_link': '/api/v1/namespaces/default/services/tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-ps-0-1',
              'uid': '0c5cf32c-f2e6-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 16:17:29,516 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 16:17:29,563 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 8, 17, 29, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4729042',
              'self_link': '/api/v1/namespaces/default/services/tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-0-2',
              'uid': '0c630b60-f2e6-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 16:17:29,565 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 16:17:29,596 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 8, 17, 29, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4729044',
              'self_link': '/api/v1/namespaces/default/services/tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-1-2',
              'uid': '0c6aebed-f2e6-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 16:17:29,630 INFO train_handler.py:103 ps: ['tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-ps-0-1:2222']
2018-11-28 16:17:29,630 INFO train_handler.py:105 worker: ['tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-0-2:2222', 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-1-2:2222']
2018-11-28 16:17:30,039 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 8, 17, 30, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '0c7629b7-f2e6-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-ps-0-1',
                         'tf': 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-ps-0-1'},
              'name': 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4729046',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-ps-0-1',
              'uid': '0c7629b7-f2e6-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '0c7629b7-f2e6-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '0c7629b7-f2e6-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-ps-0-1',
                                               'tf': 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-ps-0-1'},
                                    'name': 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'mnist-dis.py',
                                                            '--job_name = ps',
                                                            '--task_index=0',
                                                            '--ps_host=tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-0-2:2222,tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-1-2:2222',
                                                            'data_dir=/tmp',
                                                            'export_dir=/tmp'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 16:17:30,199 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 8, 17, 30, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '0cb1b6b6-f2e6-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-0-2',
                         'tf': 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-0-2'},
              'name': 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4729049',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-0-2',
              'uid': '0cb1b6b6-f2e6-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '0cb1b6b6-f2e6-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '0cb1b6b6-f2e6-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-0-2',
                                               'tf': 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-0-2'},
                                    'name': 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'mnist-dis.py',
                                                            '--job_name = '
                                                            'worker',
                                                            '--task_index=0',
                                                            '--ps_host=tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-0-2:2222,tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-1-2:2222',
                                                            'data_dir=/tmp',
                                                            'export_dir=/tmp'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 16:17:30,230 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 8, 17, 30, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '0cc98501-f2e6-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-1-2',
                         'tf': 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-1-2'},
              'name': 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4729055',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-1-2',
              'uid': '0cc98501-f2e6-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '0cc98501-f2e6-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '0cc98501-f2e6-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-1-2',
                                               'tf': 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-1-2'},
                                    'name': 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'mnist-dis.py',
                                                            '--job_name = '
                                                            'worker',
                                                            '--task_index=1',
                                                            '--ps_host=tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-0-2:2222,tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-1-2:2222',
                                                            'data_dir=/tmp',
                                                            'export_dir=/tmp'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-0c17957e-f2e6-11e8-850e-b46bfcc83baa-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 16:21:55,885 INFO disTf.py:31 start ...
2018-11-28 16:21:55,888 INFO disTf.py:21 service start ...
2018-11-28 16:21:57,097 INFO disTf.py:31 start ...
2018-11-28 16:22:04,822 INFO disTf.py:31 start ...
2018-11-28 16:22:04,826 INFO disTf.py:21 service start ...
2018-11-28 16:22:12,080 INFO train_handler.py:142 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "mnist-dis.py",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-28 16:22:12,080 INFO train_handler.py:145 parse data: {'type': 'tensorflow', 'file': 'mnist-dis.py', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-28 16:22:12,096 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 16:22:12,170 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 8, 22, 12, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4733087',
              'self_link': '/api/v1/namespaces/default/services/tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-ps-0-1',
              'uid': 'b4d1a1b1-f2e6-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 16:22:12,172 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 16:22:12,179 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 8, 22, 12, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4733088',
              'self_link': '/api/v1/namespaces/default/services/tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-0-2',
              'uid': 'b4da3c4a-f2e6-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 16:22:12,181 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 16:22:12,210 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 8, 22, 12, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4733090',
              'self_link': '/api/v1/namespaces/default/services/tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-1-2',
              'uid': 'b4db8fb2-f2e6-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 16:22:12,312 INFO train_handler.py:103 ps: ['tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-ps-0-1:2222']
2018-11-28 16:22:12,312 INFO train_handler.py:105 worker: ['tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-0-2:2222', 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-1-2:2222']
2018-11-28 16:22:12,351 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 8, 22, 12, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'b4f3866e-f2e6-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-ps-0-1',
                         'tf': 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-ps-0-1'},
              'name': 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4733097',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-ps-0-1',
              'uid': 'b4f3866e-f2e6-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'b4f3866e-f2e6-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'b4f3866e-f2e6-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-ps-0-1',
                                               'tf': 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-ps-0-1'},
                                    'name': 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'mnist-dis.py',
                                                            '--job_name = ps',
                                                            '--task_index=0',
                                                            '--ps_host=tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-0-2:2222,tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-1-2:2222',
                                                            '--data_dir=/tmp',
                                                            '--export_dir=/tmp'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 16:22:12,367 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 8, 22, 12, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'b4f609cd-f2e6-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-0-2',
                         'tf': 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-0-2'},
              'name': 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4733100',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-0-2',
              'uid': 'b4f609cd-f2e6-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'b4f609cd-f2e6-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'b4f609cd-f2e6-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-0-2',
                                               'tf': 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-0-2'},
                                    'name': 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'mnist-dis.py',
                                                            '--job_name = '
                                                            'worker',
                                                            '--task_index=0',
                                                            '--ps_host=tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-0-2:2222,tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-1-2:2222',
                                                            '--data_dir=/tmp',
                                                            '--export_dir=/tmp'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 16:22:12,389 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 8, 22, 12, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'b4f88099-f2e6-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-1-2',
                         'tf': 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-1-2'},
              'name': 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4733104',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-1-2',
              'uid': 'b4f88099-f2e6-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'b4f88099-f2e6-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'b4f88099-f2e6-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-1-2',
                                               'tf': 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-1-2'},
                                    'name': 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'mnist-dis.py',
                                                            '--job_name = '
                                                            'worker',
                                                            '--task_index=1',
                                                            '--ps_host=tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-0-2:2222,tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-1-2:2222',
                                                            '--data_dir=/tmp',
                                                            '--export_dir=/tmp'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-b49407c8-f2e6-11e8-bbdc-b46bfcc83baa-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 17:22:17,434 INFO disTf.py:31 start ...
2018-11-28 17:22:17,437 INFO disTf.py:21 service start ...
2018-11-28 17:22:43,379 INFO train_handler.py:142 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "mnist-dis.py",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-28 17:22:43,379 INFO train_handler.py:145 parse data: {'type': 'tensorflow', 'file': 'mnist-dis.py', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-28 17:22:43,396 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 17:22:43,422 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 9, 22, 43, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4776391',
              'self_link': '/api/v1/namespaces/default/services/tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-ps-0-1',
              'uid': '294546db-f2ef-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 17:22:43,424 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 17:22:43,431 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 9, 22, 43, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4776392',
              'self_link': '/api/v1/namespaces/default/services/tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-0-2',
              'uid': '294702f4-f2ef-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 17:22:43,433 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 17:22:43,446 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 9, 22, 43, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4776394',
              'self_link': '/api/v1/namespaces/default/services/tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-1-2',
              'uid': '29488e3e-f2ef-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 17:22:43,499 INFO train_handler.py:103 ps: ['tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-ps-0-1:2222']
2018-11-28 17:22:43,499 INFO train_handler.py:105 worker: ['tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-0-2:2222', 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-1-2:2222']
2018-11-28 17:22:43,532 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 9, 22, 43, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '2954986f-f2ef-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-ps-0-1',
                         'tf': 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-ps-0-1'},
              'name': 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4776397',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-ps-0-1',
              'uid': '2954986f-f2ef-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '2954986f-f2ef-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '2954986f-f2ef-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-ps-0-1',
                                               'tf': 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-ps-0-1'},
                                    'name': 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'mnist-dis.py',
                                                            '--job_name = ps',
                                                            '--task_index=0',
                                                            '--ps_host=tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-0-2:2222,tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-1-2:2222',
                                                            '--data_dir=/tmp',
                                                            '--export_dir=/tmp'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 17:22:43,560 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 9, 22, 43, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '2958cc7b-f2ef-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-0-2',
                         'tf': 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-0-2'},
              'name': 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4776399',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-0-2',
              'uid': '2958cc7b-f2ef-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '2958cc7b-f2ef-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '2958cc7b-f2ef-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-0-2',
                                               'tf': 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-0-2'},
                                    'name': 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'mnist-dis.py',
                                                            '--job_name = '
                                                            'worker',
                                                            '--task_index=0',
                                                            '--ps_host=tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-0-2:2222,tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-1-2:2222',
                                                            '--data_dir=/tmp',
                                                            '--export_dir=/tmp'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 17:22:43,580 INFO train_handler.py:115 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 9, 22, 43, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '295c6941-f2ef-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-1-2',
                         'tf': 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-1-2'},
              'name': 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4776404',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-1-2',
              'uid': '295c6941-f2ef-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '295c6941-f2ef-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '295c6941-f2ef-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-1-2',
                                               'tf': 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-1-2'},
                                    'name': 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'mnist-dis.py',
                                                            '--job_name = '
                                                            'worker',
                                                            '--task_index=1',
                                                            '--ps_host=tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-0-2:2222,tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-1-2:2222',
                                                            '--data_dir=/tmp',
                                                            '--export_dir=/tmp'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-29004c9a-f2ef-11e8-9260-b46bfcc83baa-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 17:29:10,183 INFO disTf.py:31 start ...
2018-11-28 17:29:10,186 INFO disTf.py:21 service start ...
2018-11-28 17:29:22,092 INFO train_handler.py:143 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "mnist-dis.py",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-28 17:29:22,092 INFO train_handler.py:146 parse data: {'type': 'tensorflow', 'file': 'mnist-dis.py', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-28 17:29:22,108 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 17:29:22,137 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 9, 29, 22, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4781698',
              'self_link': '/api/v1/namespaces/default/services/tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-ps-0-1',
              'uid': '16ed34a8-f2f0-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 17:29:22,139 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 17:29:22,160 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 9, 29, 22, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4781699',
              'self_link': '/api/v1/namespaces/default/services/tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-worker-0-2',
              'uid': '16eec41d-f2f0-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 17:29:22,163 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 17:29:22,168 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 9, 29, 22, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4781700',
              'self_link': '/api/v1/namespaces/default/services/tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-worker-1-2',
              'uid': '16f2654e-f2f0-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 17:29:22,212 INFO train_handler.py:104 ps: ['tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-ps-0-1:2222']
2018-11-28 17:29:22,213 INFO train_handler.py:106 worker: ['tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-worker-0-2:2222', 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-worker-1-2:2222']
2018-11-28 17:29:22,249 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 9, 29, 22, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '16fcd867-f2f0-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-ps-0-1',
                         'tf': 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-ps-0-1'},
              'name': 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4781704',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-ps-0-1',
              'uid': '16fcd867-f2f0-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '16fcd867-f2f0-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '16fcd867-f2f0-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-ps-0-1',
                                               'tf': 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-ps-0-1'},
                                    'name': 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['sleep', '3600'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 17:29:22,271 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 9, 29, 22, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '1700b273-f2f0-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-worker-0-2',
                         'tf': 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-worker-0-2'},
              'name': 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4781705',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-worker-0-2',
              'uid': '1700b273-f2f0-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '1700b273-f2f0-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '1700b273-f2f0-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-worker-0-2',
                                               'tf': 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-worker-0-2'},
                                    'name': 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['sleep', '3600'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 17:29:22,311 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 9, 29, 22, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '17044e0e-f2f0-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-worker-1-2',
                         'tf': 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-worker-1-2'},
              'name': 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4781711',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-worker-1-2',
              'uid': '17044e0e-f2f0-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '17044e0e-f2f0-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '17044e0e-f2f0-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-worker-1-2',
                                               'tf': 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-worker-1-2'},
                                    'name': 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['sleep', '3600'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-16a72f76-f2f0-11e8-8587-b46bfcc83baa-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 18:35:31,118 INFO disTf.py:31 start ...
2018-11-28 18:35:31,121 INFO disTf.py:21 service start ...
2018-11-28 18:35:33,498 INFO train_handler.py:143 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "mnist-dis.py",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-28 18:35:33,498 INFO train_handler.py:146 parse data: {'type': 'tensorflow', 'file': 'mnist-dis.py', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-28 18:35:33,518 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 18:35:33,544 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 10, 35, 34, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4827817',
              'self_link': '/api/v1/namespaces/default/services/tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-ps-0-1',
              'uid': '567e4c1a-f2f9-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 18:35:33,546 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 18:35:33,559 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 10, 35, 34, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4827819',
              'self_link': '/api/v1/namespaces/default/services/tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-worker-0-2',
              'uid': '56802226-f2f9-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 18:35:33,561 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 18:35:33,575 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 10, 35, 34, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4827821',
              'self_link': '/api/v1/namespaces/default/services/tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-worker-1-2',
              'uid': '56822d97-f2f9-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 18:35:33,622 INFO train_handler.py:104 ps: ['tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-ps-0-1:2222']
2018-11-28 18:35:33,623 INFO train_handler.py:106 worker: ['tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-worker-0-2:2222', 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-worker-1-2:2222']
2018-11-28 18:35:33,652 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 10, 35, 34, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '568e65e4-f2f9-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-ps-0-1',
                         'tf': 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-ps-0-1'},
              'name': 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4827823',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-ps-0-1',
              'uid': '568e65e4-f2f9-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '568e65e4-f2f9-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '568e65e4-f2f9-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-ps-0-1',
                                               'tf': 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-ps-0-1'},
                                    'name': 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['sleep', '3600'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 18:35:33,671 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 10, 35, 34, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '56906838-f2f9-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-worker-0-2',
                         'tf': 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-worker-0-2'},
              'name': 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4827824',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-worker-0-2',
              'uid': '56906838-f2f9-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '56906838-f2f9-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '56906838-f2f9-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-worker-0-2',
                                               'tf': 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-worker-0-2'},
                                    'name': 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['sleep', '3600'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 18:35:33,703 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 10, 35, 34, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '569351e9-f2f9-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-worker-1-2',
                         'tf': 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-worker-1-2'},
              'name': 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4827827',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-worker-1-2',
              'uid': '569351e9-f2f9-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '569351e9-f2f9-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '569351e9-f2f9-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-worker-1-2',
                                               'tf': 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-worker-1-2'},
                                    'name': 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['sleep', '3600'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-55cb9cba-f2f9-11e8-bf29-b46bfcc83baa-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 18:37:12,413 INFO disTf.py:31 start ...
2018-11-28 18:37:12,416 INFO disTf.py:21 service start ...
2018-11-28 18:37:32,444 INFO disTf.py:31 start ...
2018-11-28 18:37:32,449 INFO disTf.py:21 service start ...
2018-11-28 18:37:43,031 INFO train_handler.py:143 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "mnist-dis.py",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-28 18:37:43,031 INFO train_handler.py:146 parse data: {'type': 'tensorflow', 'file': 'mnist-dis.py', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-28 18:37:43,048 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 18:37:43,082 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 10, 37, 44, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4829351',
              'self_link': '/api/v1/namespaces/default/services/tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-ps-0-1',
              'uid': 'a3b45ef2-f2f9-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 18:37:43,084 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 18:37:43,112 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 10, 37, 44, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4829353',
              'self_link': '/api/v1/namespaces/default/services/tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-0-2',
              'uid': 'a3b62877-f2f9-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 18:37:43,115 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-28 18:37:43,127 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 10, 37, 44, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4829355',
              'self_link': '/api/v1/namespaces/default/services/tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-1-2',
              'uid': 'a3bab9e3-f2f9-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-28 18:37:43,152 INFO train_handler.py:104 ps: ['tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-ps-0-1:2222']
2018-11-28 18:37:43,152 INFO train_handler.py:106 worker: ['tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-0-2:2222', 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-1-2:2222']
2018-11-28 18:37:43,205 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 10, 37, 44, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'a3c38023-f2f9-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-ps-0-1',
                         'tf': 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-ps-0-1'},
              'name': 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4829358',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-ps-0-1',
              'uid': 'a3c38023-f2f9-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'a3c38023-f2f9-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'a3c38023-f2f9-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-ps-0-1',
                                               'tf': 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-ps-0-1'},
                                    'name': 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'notebooks/mnist-dis.py',
                                                            '--job_name = ps',
                                                            '--task_index=0',
                                                            '--ps_host=tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-0-2:2222,tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-1-2:2222',
                                                            '--data_dir=/tmp',
                                                            '--export_dir=/tmp'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 18:37:43,250 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 10, 37, 44, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'a3c9c42e-f2f9-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-0-2',
                         'tf': 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-0-2'},
              'name': 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4829363',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-0-2',
              'uid': 'a3c9c42e-f2f9-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'a3c9c42e-f2f9-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'a3c9c42e-f2f9-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-0-2',
                                               'tf': 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-0-2'},
                                    'name': 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'notebooks/mnist-dis.py',
                                                            '--job_name = '
                                                            'worker',
                                                            '--task_index=0',
                                                            '--ps_host=tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-0-2:2222,tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-1-2:2222',
                                                            '--data_dir=/tmp',
                                                            '--export_dir=/tmp'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-28 18:37:43,275 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 28, 10, 37, 44, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'a3cfed2d-f2f9-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-1-2',
                         'tf': 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-1-2'},
              'name': 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '4829370',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-1-2',
              'uid': 'a3cfed2d-f2f9-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'a3cfed2d-f2f9-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'a3cfed2d-f2f9-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-1-2',
                                               'tf': 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-1-2'},
                                    'name': 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'notebooks/mnist-dis.py',
                                                            '--job_name = '
                                                            'worker',
                                                            '--task_index=1',
                                                            '--ps_host=tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-0-2:2222,tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-1-2:2222',
                                                            '--data_dir=/tmp',
                                                            '--export_dir=/tmp'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-a300d262-f2f9-11e8-bdf8-b46bfcc83baa-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-29 18:54:16,465 INFO disTf.py:31 start ...
2018-11-29 18:54:16,469 INFO disTf.py:21 service start ...
2018-11-29 18:55:57,448 INFO train_handler.py:143 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "mnist-dis.py",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-29 18:56:00,686 INFO train_handler.py:146 parse data: {'type': 'tensorflow', 'file': 'mnist-dis.py', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-29 18:56:02,009 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-29 18:56:02,105 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 10, 56, 2, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5670728',
              'self_link': '/api/v1/namespaces/default/services/tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-ps-0-1',
              'uid': '5cd34a24-f3c5-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-29 18:56:02,112 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-29 18:56:02,123 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 10, 56, 2, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5670730',
              'self_link': '/api/v1/namespaces/default/services/tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-0-2',
              'uid': '5cd74875-f3c5-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-29 18:56:02,128 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-29 18:56:02,141 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 10, 56, 2, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5670732',
              'self_link': '/api/v1/namespaces/default/services/tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-1-2',
              'uid': '5cda08c4-f3c5-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-29 18:56:02,731 INFO train_handler.py:104 ps: ['tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-ps-0-1:2222']
2018-11-29 18:56:02,731 INFO train_handler.py:106 worker: ['tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-0-2:2222', 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-1-2:2222']
2018-11-29 18:56:06,444 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 10, 56, 6, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '5f65f48c-f3c5-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-ps-0-1',
                         'tf': 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-ps-0-1'},
              'name': 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5670740',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-ps-0-1',
              'uid': '5f65f48c-f3c5-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '5f65f48c-f3c5-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '5f65f48c-f3c5-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-ps-0-1',
                                               'tf': 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-ps-0-1'},
                                    'name': 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'notebooks/mnist-dis.py',
                                                            '--job_name = ps',
                                                            '--task_index=0',
                                                            '--ps_host=tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-0-2:2222,tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-1-2:2222',
                                                            '--data_dir=/tmp',
                                                            '--export_dir=/tmp'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-29 18:56:08,485 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 10, 56, 8, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '609e2dba-f3c5-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-0-2',
                         'tf': 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-0-2'},
              'name': 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5670750',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-0-2',
              'uid': '609e2dba-f3c5-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '609e2dba-f3c5-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '609e2dba-f3c5-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-0-2',
                                               'tf': 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-0-2'},
                                    'name': 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'notebooks/mnist-dis.py',
                                                            '--job_name = '
                                                            'worker',
                                                            '--task_index=0',
                                                            '--ps_host=tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-0-2:2222,tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-1-2:2222',
                                                            '--data_dir=/tmp',
                                                            '--export_dir=/tmp'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-29 18:56:09,611 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 10, 56, 10, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '614a331c-f3c5-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-1-2',
                         'tf': 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-1-2'},
              'name': 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5670760',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-1-2',
              'uid': '614a331c-f3c5-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '614a331c-f3c5-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '614a331c-f3c5-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-1-2',
                                               'tf': 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-1-2'},
                                    'name': 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'notebooks/mnist-dis.py',
                                                            '--job_name = '
                                                            'worker',
                                                            '--task_index=1',
                                                            '--ps_host=tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-0-2:2222,tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-1-2:2222',
                                                            '--data_dir=/tmp',
                                                            '--export_dir=/tmp'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-5c1195cc-f3c5-11e8-9615-b46bfcc83baa-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-29 19:02:09,979 INFO disTf.py:31 start ...
2018-11-29 19:02:09,983 INFO disTf.py:21 service start ...
2018-11-29 19:02:15,176 INFO train_handler.py:143 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "mnist-dis.py",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-29 19:02:20,261 INFO train_handler.py:146 parse data: {'type': 'tensorflow', 'file': 'mnist-dis.py', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-29 19:02:22,447 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-3e8e8ba8-f3c6-11e8-8b59-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-3e8e8ba8-f3c6-11e8-8b59-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-29 19:03:24,132 INFO disTf.py:31 start ...
2018-11-29 19:03:24,136 INFO disTf.py:21 service start ...
2018-11-29 19:03:27,187 INFO train_handler.py:143 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "mnist-dis.py",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-29 19:03:29,848 INFO train_handler.py:146 parse data: {'type': 'tensorflow', 'file': 'mnist-dis.py', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-29 19:03:31,413 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-29 19:03:31,526 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 11, 3, 32, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5671786',
              'self_link': '/api/v1/namespaces/default/services/tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-ps-0-1',
              'uid': '68b3cc54-f3c6-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-29 19:03:31,540 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-29 19:03:31,559 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 11, 3, 32, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5671787',
              'self_link': '/api/v1/namespaces/default/services/tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-0-2',
              'uid': '68b9d474-f3c6-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-29 19:03:31,567 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-29 19:03:31,588 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 11, 3, 32, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5671790',
              'self_link': '/api/v1/namespaces/default/services/tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-1-2',
              'uid': '68be10fe-f3c6-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-29 19:03:41,088 INFO train_handler.py:104 ps: ['tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-ps-0-1:2222']
2018-11-29 19:03:43,056 INFO train_handler.py:106 worker: ['tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-0-2:2222', 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-1-2:2222']
2018-11-29 19:04:13,175 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 11, 4, 13, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '817d5270-f3c6-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-ps-0-1',
                         'tf': 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-ps-0-1'},
              'name': 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5671862',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-ps-0-1',
              'uid': '817d5270-f3c6-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '817d5270-f3c6-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '817d5270-f3c6-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-ps-0-1',
                                               'tf': 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-ps-0-1'},
                                    'name': 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'notebooks/mnist-dis.py',
                                                            '--job_name = ps',
                                                            '--task_index=0',
                                                            '--ps_host=tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-0-2:2222,tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-1-2:2222',
                                                            '--data_dir=/tmp',
                                                            '--export_dir=/tmp'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-29 19:04:17,181 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 11, 4, 17, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '83e8e903-f3c6-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-0-2',
                         'tf': 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-0-2'},
              'name': 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5671874',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-0-2',
              'uid': '83e8e903-f3c6-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '83e8e903-f3c6-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '83e8e903-f3c6-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-0-2',
                                               'tf': 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-0-2'},
                                    'name': 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'notebooks/mnist-dis.py',
                                                            '--job_name = '
                                                            'worker',
                                                            '--task_index=0',
                                                            '--ps_host=tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-0-2:2222,tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-1-2:2222',
                                                            '--data_dir=/tmp',
                                                            '--export_dir=/tmp'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-29 19:04:19,391 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 11, 4, 19, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '8538e2ea-f3c6-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-1-2',
                         'tf': 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-1-2'},
              'name': 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5671886',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-1-2',
              'uid': '8538e2ea-f3c6-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '8538e2ea-f3c6-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '8538e2ea-f3c6-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-1-2',
                                               'tf': 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-1-2'},
                                    'name': 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'notebooks/mnist-dis.py',
                                                            '--job_name = '
                                                            'worker',
                                                            '--task_index=1',
                                                            '--ps_host=tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-0-2:2222,tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-1-2:2222',
                                                            '--data_dir=/tmp',
                                                            '--export_dir=/tmp'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-67cebda2-f3c6-11e8-ae32-b46bfcc83baa-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-29 19:08:41,850 INFO disTf.py:31 start ...
2018-11-29 19:08:41,854 INFO disTf.py:21 service start ...
2018-11-29 19:08:57,405 INFO train_handler.py:143 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "mnist-dis.py",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-29 19:09:00,304 INFO train_handler.py:146 parse data: {'type': 'tensorflow', 'file': 'mnist-dis.py', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-29 19:09:01,760 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-29 19:09:01,949 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 11, 9, 2, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5672730',
              'self_link': '/api/v1/namespaces/default/services/tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-ps-0-1',
              'uid': '2da443eb-f3c7-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-29 19:09:01,975 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-29 19:09:02,016 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 11, 9, 2, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5672732',
              'self_link': '/api/v1/namespaces/default/services/tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-0-2',
              'uid': '2dafdcf7-f3c7-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-29 19:09:02,033 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-29 19:09:02,084 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 11, 9, 2, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5672735',
              'self_link': '/api/v1/namespaces/default/services/tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-1-2',
              'uid': '2dba598f-f3c7-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-29 19:09:03,203 INFO train_handler.py:104 ps: ['tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-ps-0-1:2222']
2018-11-29 19:09:03,204 INFO train_handler.py:106 worker: ['tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-0-2:2222', 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-1-2:2222']
2018-11-29 19:09:05,330 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 11, 9, 5, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '2fa8b7aa-f3c7-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-ps-0-1',
                         'tf': 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-ps-0-1'},
              'name': 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5672741',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-ps-0-1',
              'uid': '2fa8b7aa-f3c7-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '2fa8b7aa-f3c7-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '2fa8b7aa-f3c7-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-ps-0-1',
                                               'tf': 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-ps-0-1'},
                                    'name': 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'mnist-dis.py',
                                                            '--job_name = ps',
                                                            '--task_index=0',
                                                            '--ps_host=tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-0-2:2222,tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-1-2:2222',
                                                            '--data_dir=/tmp',
                                                            '--export_dir=/tmp'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-29 19:09:07,145 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 11, 9, 7, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '30bd3f87-f3c7-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-0-2',
                         'tf': 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-0-2'},
              'name': 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5672769',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-0-2',
              'uid': '30bd3f87-f3c7-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '30bd3f87-f3c7-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '30bd3f87-f3c7-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-0-2',
                                               'tf': 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-0-2'},
                                    'name': 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'mnist-dis.py',
                                                            '--job_name = '
                                                            'worker',
                                                            '--task_index=0',
                                                            '--ps_host=tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-0-2:2222,tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-1-2:2222',
                                                            '--data_dir=/tmp',
                                                            '--export_dir=/tmp'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-29 19:09:10,010 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 11, 9, 10, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '3271de3e-f3c7-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-1-2',
                         'tf': 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-1-2'},
              'name': 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5672781',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-1-2',
              'uid': '3271de3e-f3c7-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '3271de3e-f3c7-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '3271de3e-f3c7-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-1-2',
                                               'tf': 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-1-2'},
                                    'name': 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'mnist-dis.py',
                                                            '--job_name = '
                                                            'worker',
                                                            '--task_index=1',
                                                            '--ps_host=tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-0-2:2222,tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-1-2:2222',
                                                            '--data_dir=/tmp',
                                                            '--export_dir=/tmp'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-2cbe7aae-f3c7-11e8-804a-b46bfcc83baa-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-29 19:18:29,262 INFO disTf.py:31 start ...
2018-11-29 19:18:29,265 INFO disTf.py:21 service start ...
2018-11-29 19:20:50,878 INFO disTf.py:31 start ...
2018-11-29 19:20:56,634 INFO train_handler.py:143 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "mnist-dis.py",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-29 19:20:56,635 INFO train_handler.py:146 parse data: {'type': 'tensorflow', 'file': 'mnist-dis.py', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-29 19:20:56,673 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-29 19:20:56,703 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 11, 20, 57, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5674507',
              'self_link': '/api/v1/namespaces/default/services/tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-ps-0-1',
              'uid': 'd7b0831f-f3c8-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-29 19:20:56,706 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-29 19:20:56,714 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 11, 20, 57, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5674508',
              'self_link': '/api/v1/namespaces/default/services/tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-0-2',
              'uid': 'd7b2b8a1-f3c8-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-29 19:20:56,717 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-29 19:20:56,769 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 11, 20, 57, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5674511',
              'self_link': '/api/v1/namespaces/default/services/tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-1-2',
              'uid': 'd7b45921-f3c8-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-29 19:20:56,783 INFO train_handler.py:104 ps: ['tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-ps-0-1:2222']
2018-11-29 19:20:56,784 INFO train_handler.py:106 worker: ['tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-0-2:2222', 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-1-2:2222']
2018-11-29 19:20:56,841 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 11, 20, 57, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'd7c45d45-f3c8-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-ps-0-1',
                         'tf': 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-ps-0-1'},
              'name': 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5674513',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-ps-0-1',
              'uid': 'd7c45d45-f3c8-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'd7c45d45-f3c8-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'd7c45d45-f3c8-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-ps-0-1',
                                               'tf': 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-ps-0-1'},
                                    'name': 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'mnist-dis.py',
                                                            '--job_name = ps',
                                                            '--task_index=0',
                                                            '--ps_host=tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-0-2:2222,tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-1-2:2222',
                                                            '--data_dir=/tmp',
                                                            '--export_dir=/tmp'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-29 19:20:56,884 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 11, 20, 57, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'd7c85220-f3c8-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-0-2',
                         'tf': 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-0-2'},
              'name': 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5674516',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-0-2',
              'uid': 'd7c85220-f3c8-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'd7c85220-f3c8-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'd7c85220-f3c8-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-0-2',
                                               'tf': 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-0-2'},
                                    'name': 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'mnist-dis.py',
                                                            '--job_name = '
                                                            'worker',
                                                            '--task_index=0',
                                                            '--ps_host=tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-0-2:2222,tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-1-2:2222',
                                                            '--data_dir=/tmp',
                                                            '--export_dir=/tmp'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-29 19:20:56,916 INFO train_handler.py:116 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 11, 20, 57, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'd7ceb933-f3c8-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-1-2',
                         'tf': 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-1-2'},
              'name': 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5674520',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-1-2',
              'uid': 'd7ceb933-f3c8-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'd7ceb933-f3c8-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'd7ceb933-f3c8-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-1-2',
                                               'tf': 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-1-2'},
                                    'name': 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'mnist-dis.py',
                                                            '--job_name = '
                                                            'worker',
                                                            '--task_index=1',
                                                            '--ps_host=tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-ps-0-1:2222',
                                                            '--worker_hosts=tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-0-2:2222,tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-1-2:2222',
                                                            '--data_dir=/tmp',
                                                            '--export_dir=/tmp'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-d753051e-f3c8-11e8-970a-b46bfcc83baa-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-29 19:46:05,578 INFO disTf.py:31 start ...
2018-11-29 19:46:05,580 INFO disTf.py:21 service start ...
2018-11-29 19:46:11,101 INFO train_handler.py:144 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "mnist-dis.py",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-29 19:46:11,102 INFO train_handler.py:147 parse data: {'type': 'tensorflow', 'file': 'mnist-dis.py', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-29 19:46:11,123 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-29 19:46:11,229 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 11, 46, 11, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5677433',
              'self_link': '/api/v1/namespaces/default/services/tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-ps-0-1',
              'uid': '5e6ce81e-f3cc-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-29 19:46:11,241 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-29 19:46:11,255 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 11, 46, 11, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5677435',
              'self_link': '/api/v1/namespaces/default/services/tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-0-2',
              'uid': '5e71b740-f3cc-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-29 19:46:11,265 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-29 19:46:11,293 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 11, 46, 11, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5677437',
              'self_link': '/api/v1/namespaces/default/services/tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-1-2',
              'uid': '5e7576cd-f3cc-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-29 19:46:11,335 INFO train_handler.py:105 ps: ['tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-ps-0-1:2222']
2018-11-29 19:46:11,335 INFO train_handler.py:107 worker: ['tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-0-2:2222', 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-1-2:2222']
2018-11-29 19:46:11,410 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 11, 46, 11, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '5e869429-f3cc-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-ps-0-1',
                         'tf': 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-ps-0-1'},
              'name': 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5677439',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-ps-0-1',
              'uid': '5e869429-f3cc-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '5e869429-f3cc-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '5e869429-f3cc-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-ps-0-1',
                                               'tf': 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-ps-0-1'},
                                    'name': 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': ['mnist-dis.py',
                                                         '--job_name = ps',
                                                         '--task_index=0',
                                                         '--ps_host=tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-ps-0-1:2222',
                                                         '--worker_hosts=tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-0-2:2222,tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-1-2:2222'],
                                                'command': ['python'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-29 19:46:11,503 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 11, 46, 12, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '5e8f14ae-f3cc-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-0-2',
                         'tf': 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-0-2'},
              'name': 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5677446',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-0-2',
              'uid': '5e8f14ae-f3cc-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '5e8f14ae-f3cc-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '5e8f14ae-f3cc-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-0-2',
                                               'tf': 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-0-2'},
                                    'name': 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': ['mnist-dis.py',
                                                         '--job_name = worker',
                                                         '--task_index=0',
                                                         '--ps_host=tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-ps-0-1:2222',
                                                         '--worker_hosts=tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-0-2:2222,tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-1-2:2222'],
                                                'command': ['python'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-29 19:46:11,542 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 11, 46, 12, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': '5e9b700f-f3cc-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-1-2',
                         'tf': 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-1-2'},
              'name': 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5677452',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-1-2',
              'uid': '5e9b700f-f3cc-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': '5e9b700f-f3cc-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': '5e9b700f-f3cc-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-1-2',
                                               'tf': 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-1-2'},
                                    'name': 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': ['mnist-dis.py',
                                                         '--job_name = worker',
                                                         '--task_index=1',
                                                         '--ps_host=tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-ps-0-1:2222',
                                                         '--worker_hosts=tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-0-2:2222,tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-1-2:2222'],
                                                'command': ['python'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-5e045b24-f3cc-11e8-aba6-b46bfcc83baa-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-29 19:49:17,832 INFO disTf.py:31 start ...
2018-11-29 19:49:17,834 INFO disTf.py:21 service start ...
2018-11-29 19:49:21,776 INFO train_handler.py:144 POST data: b'{\r\n    "type": "tensorflow",\r\n    "file": "mnist-dis.py",\r\n    "data": "/yyy",\r\n    "resource": {\r\n        "cpu": 2,\r\n        "mem": "4g",\r\n        "gpu": 1\r\n    },\r\n    "detail": {\r\n        "ps": 1,\r\n        "worker": 2\r\n    }\r\n}'
2018-11-29 19:49:21,776 INFO train_handler.py:147 parse data: {'type': 'tensorflow', 'file': 'mnist-dis.py', 'data': '/yyy', 'resource': {'cpu': 2, 'mem': '4g', 'gpu': 1}, 'detail': {'ps': 1, 'worker': 2}}
2018-11-29 19:49:21,813 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-ps-0-1',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-ps-0-1'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-29 19:49:31,275 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 11, 49, 31, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5678011',
              'self_link': '/api/v1/namespaces/default/services/tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-ps-0-1',
              'uid': 'd5a9f3bd-f3cc-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-ps-0-1'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-29 19:49:31,289 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-worker-0-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-worker-0-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-29 19:49:31,332 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 11, 49, 31, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5678014',
              'self_link': '/api/v1/namespaces/default/services/tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-worker-0-2',
              'uid': 'd5b2718a-f3cc-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-worker-0-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-29 19:49:31,341 INFO train_handler.py:49 create service body: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': None,
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-worker-1-2',
              'namespace': None,
              'owner_references': None,
              'resource_version': None,
              'self_link': None,
              'uid': None},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': None,
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-worker-1-2'},
          'session_affinity': None,
          'session_affinity_config': None,
          'type': None},
 'status': None}
2018-11-29 19:49:31,378 INFO train_handler.py:54 service response: {'api_version': 'v1',
 'kind': 'Service',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 11, 49, 31, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': None,
              'name': 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5678016',
              'self_link': '/api/v1/namespaces/default/services/tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-worker-1-2',
              'uid': 'd5b97fb2-f3cc-11e8-b6dc-6c92bf52b97e'},
 'spec': {'cluster_ip': 'None',
          'external_i_ps': None,
          'external_name': None,
          'external_traffic_policy': None,
          'health_check_node_port': None,
          'load_balancer_ip': None,
          'load_balancer_source_ranges': None,
          'ports': [{'name': None,
                     'node_port': None,
                     'port': 2222,
                     'protocol': 'TCP',
                     'target_port': 2222}],
          'publish_not_ready_addresses': None,
          'selector': {'tf': 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-worker-1-2'},
          'session_affinity': 'None',
          'session_affinity_config': None,
          'type': 'ClusterIP'},
 'status': {'load_balancer': {'ingress': None}}}
2018-11-29 19:49:31,391 INFO train_handler.py:105 ps: ['tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-ps-0-1:2222']
2018-11-29 19:49:31,391 INFO train_handler.py:107 worker: ['tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-worker-0-2:2222', 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-worker-1-2:2222']
2018-11-29 19:49:31,537 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 11, 49, 32, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'd5d053f7-f3cc-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-ps-0-1',
                         'tf': 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-ps-0-1'},
              'name': 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-ps-0-1',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5678019',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-ps-0-1',
              'uid': 'd5d053f7-f3cc-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'd5d053f7-f3cc-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'd5d053f7-f3cc-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-ps-0-1',
                                               'tf': 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-ps-0-1'},
                                    'name': 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-ps-0-1',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'mnist-dis.py'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-ps-0-1',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-29 19:49:31,590 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 11, 49, 32, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'd5d75250-f3cc-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-worker-0-2',
                         'tf': 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-worker-0-2'},
              'name': 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-worker-0-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5678022',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-worker-0-2',
              'uid': 'd5d75250-f3cc-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'd5d75250-f3cc-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'd5d75250-f3cc-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-worker-0-2',
                                               'tf': 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-worker-0-2'},
                                    'name': 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-worker-0-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'mnist-dis.py'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-worker-0-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
2018-11-29 19:49:32,042 INFO train_handler.py:117 create job: {'api_version': 'batch/v1',
 'kind': 'Job',
 'metadata': {'annotations': None,
              'cluster_name': None,
              'creation_timestamp': datetime.datetime(2018, 11, 29, 11, 49, 32, tzinfo=tzutc()),
              'deletion_grace_period_seconds': None,
              'deletion_timestamp': None,
              'finalizers': None,
              'generate_name': None,
              'generation': None,
              'initializers': None,
              'labels': {'controller-uid': 'd61d436e-f3cc-11e8-b6dc-6c92bf52b97e',
                         'job-name': 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-worker-1-2',
                         'tf': 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-worker-1-2'},
              'name': 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-worker-1-2',
              'namespace': 'default',
              'owner_references': None,
              'resource_version': '5678035',
              'self_link': '/apis/batch/v1/namespaces/default/jobs/tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-worker-1-2',
              'uid': 'd61d436e-f3cc-11e8-b6dc-6c92bf52b97e'},
 'spec': {'active_deadline_seconds': None,
          'backoff_limit': 6,
          'completions': 1,
          'manual_selector': None,
          'parallelism': 1,
          'selector': {'match_expressions': None,
                       'match_labels': {'controller-uid': 'd61d436e-f3cc-11e8-b6dc-6c92bf52b97e'}},
          'template': {'metadata': {'annotations': None,
                                    'cluster_name': None,
                                    'creation_timestamp': None,
                                    'deletion_grace_period_seconds': None,
                                    'deletion_timestamp': None,
                                    'finalizers': None,
                                    'generate_name': None,
                                    'generation': None,
                                    'initializers': None,
                                    'labels': {'controller-uid': 'd61d436e-f3cc-11e8-b6dc-6c92bf52b97e',
                                               'job-name': 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-worker-1-2',
                                               'tf': 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-worker-1-2'},
                                    'name': 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-worker-1-2',
                                    'namespace': None,
                                    'owner_references': None,
                                    'resource_version': None,
                                    'self_link': None,
                                    'uid': None},
                       'spec': {'active_deadline_seconds': None,
                                'affinity': None,
                                'automount_service_account_token': None,
                                'containers': [{'args': None,
                                                'command': ['python',
                                                            'mnist-dis.py'],
                                                'env': None,
                                                'env_from': None,
                                                'image': 'tensorflow/tensorflow:1.4.1-gpu-py3',
                                                'image_pull_policy': 'IfNotPresent',
                                                'lifecycle': None,
                                                'liveness_probe': None,
                                                'name': 'tf-cfaafaf8-f3cc-11e8-a5e0-b46bfcc83baa-worker-1-2',
                                                'ports': [{'container_port': 2222,
                                                           'host_ip': None,
                                                           'host_port': None,
                                                           'name': None,
                                                           'protocol': 'TCP'}],
                                                'readiness_probe': None,
                                                'resources': {'limits': None,
                                                              'requests': None},
                                                'security_context': None,
                                                'stdin': None,
                                                'stdin_once': None,
                                                'termination_message_path': '/dev/termination-log',
                                                'termination_message_policy': 'File',
                                                'tty': None,
                                                'volume_devices': None,
                                                'volume_mounts': None,
                                                'working_dir': None}],
                                'dns_config': None,
                                'dns_policy': 'ClusterFirst',
                                'host_aliases': None,
                                'host_ipc': None,
                                'host_network': None,
                                'host_pid': None,
                                'hostname': None,
                                'image_pull_secrets': None,
                                'init_containers': None,
                                'node_name': None,
                                'node_selector': None,
                                'priority': None,
                                'priority_class_name': None,
                                'readiness_gates': None,
                                'restart_policy': 'Never',
                                'scheduler_name': 'default-scheduler',
                                'security_context': {'fs_group': None,
                                                     'run_as_group': None,
                                                     'run_as_non_root': None,
                                                     'run_as_user': None,
                                                     'se_linux_options': None,
                                                     'supplemental_groups': None,
                                                     'sysctls': None},
                                'service_account': None,
                                'service_account_name': None,
                                'share_process_namespace': None,
                                'subdomain': None,
                                'termination_grace_period_seconds': 30,
                                'tolerations': None,
                                'volumes': None}}},
 'status': {'active': None,
            'completion_time': None,
            'conditions': None,
            'failed': None,
            'start_time': None,
            'succeeded': None}}
